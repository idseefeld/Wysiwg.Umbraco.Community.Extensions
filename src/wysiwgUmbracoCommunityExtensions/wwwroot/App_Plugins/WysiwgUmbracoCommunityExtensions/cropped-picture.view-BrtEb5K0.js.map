{"version":3,"file":"cropped-picture.view-BrtEb5K0.js","sources":["../../../Wysiwg/src/blocks/views/cropped-picture.view.ts"],"sourcesContent":["import {\r\n  html,\r\n  customElement,\r\n  property,\r\n  css,\r\n  unsafeHTML,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport type { UmbBlockDataType } from \"@umbraco-cms/backoffice/block\";\r\nimport { ColorType, CroppedPictureCustomViewProps } from \"./types\";\r\nimport WysiwgBaseBlockEditorCustomViewElement from \"./wysiwg-base-block-editor-custom.view\";\r\n\r\n@customElement(\"wysiwg-croppedicture-view\")\r\nexport class CroppedPictureCustomView\r\n  extends WysiwgBaseBlockEditorCustomViewElement {\r\n\r\n  private debugLocalize: boolean = false;\r\n  defaultColor: ColorType = { label: \"Black\", value: \"#000\" };\r\n\r\n  @property({ attribute: false })\r\n  content?: UmbBlockDataType;\r\n\r\n  render() {\r\n    const pictureWithCrop = this.content as CroppedPictureCustomViewProps;\r\n    if (!pictureWithCrop) {\r\n      return html`<div class=\"error\">\r\n        <umb-localize key=\"wysiwg_invalidData\" .debug=${this.debugLocalize}\r\n          >invalid data</umb-localize\r\n        >\r\n      </div>`;\r\n    }\r\n    const mediaCropItems = pictureWithCrop?.mediaItem ?? [];\r\n    const mediaCropItem = mediaCropItems[0] ?? null;\r\n    const mediaKey = mediaCropItem ? mediaCropItem.mediaKey : \"\";\r\n    if (!mediaKey) {\r\n      return html`<div class=\"error\">\r\n        <umb-localize key=\"wysiwg_noImageSelected\" .debug=${this.debugLocalize}\r\n          >No image selected or found</umb-localize\r\n        >\r\n      </div>`;\r\n    } else {\r\n      const img = html`<wysiwg-cropped-image .mediaItem=${mediaCropItem}></wysiwg-cropped-image>`;\r\n\r\n      const captionColor =\r\n        pictureWithCrop?.captionColor?.value ?? this.defaultColor.value;\r\n      const caption = pictureWithCrop?.figCaption;\r\n      const inlineStyle = this.isTransparentColor(captionColor) ? '' : `style=\"color: ${captionColor};\"`;\r\n      const figCaption = caption\r\n        ? unsafeHTML(`<figcaption ${inlineStyle}>${caption}</figcaption>`)\r\n        : \"\";\r\n\r\n      return html`<figure>${img}${figCaption}</figure>`;\r\n    }\r\n  }\r\n\r\n  static styles = [\r\n    css`\r\n      :host {\r\n        display: block;\r\n        height: auto;\r\n        box-sizing: border-box;\r\n        margin: 0;\r\n        padding: 0;\r\n        font-family: var(--wysiwg-font-family, initial);\r\n      }\r\n      .error {\r\n        color: red;\r\n        font-weight: bold;\r\n        text-align: center;\r\n      }\r\n      figure {\r\n        margin: 0;\r\n        padding: 0;\r\n        display: block;\r\n      }\r\n      figcaption {\r\n        font-style: var(--wysiwg-figcaption-font-style, italic);\r\n      }\r\n    `,\r\n  ];\r\n}\r\n\r\nexport default CroppedPictureCustomView;\r\n"],"names":["CroppedPictureCustomView","WysiwgBaseBlockEditorCustomViewElement","pictureWithCrop","html","mediaCropItem","img","captionColor","_a","caption","inlineStyle","figCaption","unsafeHTML","css","__decorateClass","property","customElement","CroppedPictureCustomView$1"],"mappings":";;;;;;;AAYa,IAAAA,IAAN,cACGC,EAAuC;AAAA,EAD1C,cAAA;AAAA,UAAA,GAAA,SAAA,GAGL,KAAQ,gBAAyB,IACjC,KAAA,eAA0B,EAAE,OAAO,SAAS,OAAO,OAAO;AAAA,EAAA;AAAA,EAK1D,SAAS;;AACP,UAAMC,IAAkB,KAAK;AAC7B,QAAI,CAACA;AACI,aAAAC;AAAA,wDAC2C,KAAK,aAAa;AAAA;AAAA;AAAA;AAMhE,UAAAC,MADiBF,KAAA,gBAAAA,EAAiB,cAAa,CAAC,GACjB,CAAC,KAAK;AAE3C,QADiBE,IAAgBA,EAAc,WAAW,IAOnD;AACC,YAAAC,IAAMF,qCAAwCC,CAAa,4BAE3DE,MACJC,IAAAL,KAAA,gBAAAA,EAAiB,iBAAjB,gBAAAK,EAA+B,UAAS,KAAK,aAAa,OACtDC,IAAUN,KAAA,gBAAAA,EAAiB,YAC3BO,IAAc,KAAK,mBAAmBH,CAAY,IAAI,KAAK,iBAAiBA,CAAY,MACxFI,IAAaF,IACfG,EAAW,eAAeF,CAAW,IAAID,CAAO,eAAe,IAC/D;AAEG,aAAAL,YAAeE,CAAG,GAAGK,CAAU;AAAA,IAAA;AAhB/B,aAAAP;AAAA,4DAC+C,KAAK,aAAa;AAAA;AAAA;AAAA;AAAA,EAgB1E;AA4BJ;AAnEaH,EA0CJ,SAAS;AAAA,EACdY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBF;AA3DAC,EAAA;AAAA,EADCC,EAAS,EAAE,WAAW,GAAO,CAAA;AAAA,GANnBd,EAOX,WAAA,WAAA,CAAA;AAPWA,IAANa,EAAA;AAAA,EADNE,EAAc,2BAA2B;AAAA,GAC7Bf,CAAA;AAqEb,MAAAgB,IAAehB;"}