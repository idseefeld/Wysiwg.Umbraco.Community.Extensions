@using Umbraco.Cms.Core.Models.Blocks
@using Umbraco.Extensions
@using WysiwgUmbracoCommunityExtensions.ViewModels
@using WysiwgUmbracoCommunityExtensions.Extensions
@model BlockGridItem
@{
    var content = new Wysiwg65_pictureWithCrop(Model.Content);
    if (content?.MediaItem == null) return;

    var src = content.MediaItem.GetSelectedCropUrl(width: 400);
}
<figure>
    <img id="@content.MediaItem.Id" src="@src" alt="@content.AlternativeText" />

    @if (!string.IsNullOrEmpty(content.FigCaption))
    {
        if (!string.IsNullOrEmpty(content.CaptionColor?.Color))
        {
            <figcaption style="color: @(content.CaptionColor?.Color ?? "#000")">
                @content.FigCaption
            </figcaption>
        }
        else
        {
            <figcaption>
                @content.FigCaption
            </figcaption>
        }
    }
</figure>
