{"version":3,"file":"wysiwg-image-and-crop-picker.element-pFNAOPFJ.js","sources":["../../../Wysiwg/src/property-editors/picture/wysiwg-input-rich-media.element.ts","../../../Wysiwg/src/property-editors/picture/wysiwg-image-and-crop-picker.element.ts"],"sourcesContent":["import { UmbChangeEvent } from \"@umbraco-cms/backoffice/event\";\r\nimport { css, customElement, html, nothing, property, repeat, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbId } from \"@umbraco-cms/backoffice/id\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { UMB_IMAGE_CROPPER_EDITOR_MODAL, UMB_MEDIA_ITEM_REPOSITORY_ALIAS, UMB_MEDIA_PICKER_MODAL, UmbCropModel, UmbMediaItemModel, UmbMediaPickerPropertyValueEntry } from \"@umbraco-cms/backoffice/media\";\r\nimport { UMB_MODAL_MANAGER_CONTEXT, umbConfirmModal } from \"@umbraco-cms/backoffice/modal\";\r\nimport { UmbRepositoryItemsManager } from \"@umbraco-cms/backoffice/repository\";\r\nimport { UmbModalRouteBuilder, UmbModalRouteRegistrationController } from \"@umbraco-cms/backoffice/router\";\r\nimport { UmbSorterController, UmbSorterResolvePlacementAsGrid } from \"@umbraco-cms/backoffice/sorter\";\r\nimport { UmbTreeStartNode } from \"@umbraco-cms/backoffice/tree\";\r\nimport { UMB_VALIDATION_EMPTY_LOCALIZATION_KEY, UmbFormControlMixin } from \"@umbraco-cms/backoffice/validation\";\r\nimport { UmbVariantId } from \"@umbraco-cms/backoffice/variant\";\r\nimport { WysiwgCroppedImageElement } from \"../../blocks/components/wysiwg-cropped-image.element\";\r\nimport { WysiwgMediaPickerPropertyValueEntry, WysiwgMediaPickerPropertyValues } from \"./types\";\r\nimport { UmbUploadableItem } from \"@umbraco-cms/backoffice/dropzone\";\r\n\r\ntype RichMediaCardModel = {\r\n  unique: string;\r\n  media: string;\r\n  name: string;\r\n  src?: string;\r\n  icon?: string;\r\n  isTrashed?: boolean;\r\n};\r\n\r\n// this is based on a copy of class UmbInputRichMediaElement from \"@umbraco-cms/backoffice/media\"; which is not extendable.\r\nconst elementName = 'wysiwg-input-rich-media';\r\n@customElement(elementName)\r\nexport class WysiwgInputRichMediaElement extends UmbFormControlMixin<\r\n  Array<UmbMediaPickerPropertyValueEntry>,\r\n  typeof UmbLitElement,\r\n  undefined\r\n>(UmbLitElement, undefined) {\r\n  //#region unchanged\r\n  #sorter = new UmbSorterController<UmbMediaPickerPropertyValueEntry>(this, {\r\n    getUniqueOfElement: (element) => {\r\n      return element.id;\r\n    },\r\n    getUniqueOfModel: (modelEntry) => {\r\n      return modelEntry.key;\r\n    },\r\n    identifier: 'Umb.SorterIdentifier.InputRichMedia',\r\n    itemSelector: 'uui-card-media',\r\n    containerSelector: '.container',\r\n    resolvePlacement: UmbSorterResolvePlacementAsGrid,\r\n    onChange: ({ model }) => {\r\n      this.value = model;\r\n      this.dispatchEvent(new UmbChangeEvent());\r\n    },\r\n  });\r\n\r\n  /**\r\n   * Sets the input to required, meaning validation will fail if the value is empty.\r\n   * @type {boolean}\r\n   */\r\n  @property({ type: Boolean })\r\n  required?: boolean;\r\n\r\n  @property({ type: String })\r\n  requiredMessage?: string;\r\n\r\n  /**\r\n   * This is a minimum amount of selected items in this input.\r\n   * @type {number}\r\n   * @attr\r\n   * @default 0\r\n   */\r\n  @property({ type: Number })\r\n  public min = 0;\r\n\r\n  /**\r\n   * Min validation message.\r\n   * @type {boolean}\r\n   * @attr\r\n   * @default\r\n   */\r\n  @property({ type: String, attribute: 'min-message' })\r\n  minMessage = 'This field need more items';\r\n\r\n  /**\r\n   * This is a maximum amount of selected items in this input.\r\n   * @type {number}\r\n   * @attr\r\n   * @default Infinity\r\n   */\r\n  @property({ type: Number })\r\n  public max = Infinity;\r\n\r\n  /**\r\n   * Max validation message.\r\n   * @type {boolean}\r\n   * @attr\r\n   * @default\r\n   */\r\n  @property({ type: String, attribute: 'min-message' })\r\n  maxMessage = 'This field exceeds the allowed amount of items';\r\n\r\n  @property({ type: Array })\r\n  public override set value(value: Array<UmbMediaPickerPropertyValueEntry> | undefined) {\r\n    super.value = value;\r\n    this.#sorter.setModel(value);\r\n    this.#itemManager.setUniques(value?.map((x) => x.mediaKey));\r\n    // Maybe the new value is using an existing media, and there we need to update the cards despite no repository update.\r\n    this.#populateCards();\r\n  }\r\n  public override get value(): Array<UmbMediaPickerPropertyValueEntry> | undefined {\r\n    return super.value;\r\n  }\r\n\r\n  @property({ type: Array })\r\n  allowedContentTypeIds?: string[] | undefined;\r\n\r\n  @property({ type: Object, attribute: false })\r\n  startNode?: UmbTreeStartNode;\r\n\r\n  @property({ type: Boolean })\r\n  multiple = false;\r\n\r\n  @property({ type: Array })\r\n  public preselectedCrops?: Array<UmbCropModel>;\r\n\r\n  @property({ type: Boolean })\r\n  public set focalPointEnabled(value: boolean) {\r\n    this.#focalPointEnabled = value;\r\n  }\r\n  public get focalPointEnabled(): boolean {\r\n    return this.#focalPointEnabled;\r\n  }\r\n  #focalPointEnabled: boolean = false;\r\n\r\n  @property()\r\n  /** @deprecated will be removed in v17 */\r\n  public set alias(value: string | undefined) {\r\n    if (!value) { }\r\n    //this.#modalRouter.setUniquePathValue('propertyAlias', value);\r\n  }\r\n  public get alias(): string | undefined {\r\n    return undefined; //this.#modalRouter.getUniquePathValue('propertyAlias');\r\n  }\r\n\r\n  @property()\r\n  /** @deprecated will be removed in v17 */\r\n  public set variantId(value: string | UmbVariantId | undefined) {\r\n    if (!value) { }\r\n    //this.#modalRouter.setUniquePathValue('variantId', value?.toString());\r\n  }\r\n  public get variantId(): string | undefined {\r\n    return undefined; //this.#modalRouter.getUniquePathValue('variantId');\r\n  }\r\n\r\n  /**\r\n   * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n   * @type {boolean}\r\n   * @attr\r\n   * @default\r\n   */\r\n  @property({ type: Boolean, reflect: true })\r\n  public get readonly() {\r\n    return this.#readonly;\r\n  }\r\n  public set readonly(value) {\r\n    this.#readonly = value;\r\n\r\n    if (this.#readonly) {\r\n      this.#sorter.disable();\r\n    } else {\r\n      this.#sorter.enable();\r\n    }\r\n  }\r\n  #readonly = false;\r\n\r\n  @state()\r\n  private _cards: Array<RichMediaCardModel> = [];\r\n\r\n  @state()\r\n  private _routeBuilder?: UmbModalRouteBuilder;\r\n\r\n  readonly #itemManager = new UmbRepositoryItemsManager<UmbMediaItemModel>(this, UMB_MEDIA_ITEM_REPOSITORY_ALIAS);\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.observe(this.#itemManager.items, () => {\r\n      this.#populateCards();\r\n    });\r\n\r\n    new UmbModalRouteRegistrationController(this, UMB_IMAGE_CROPPER_EDITOR_MODAL)\r\n      .addAdditionalPath(':key')\r\n      .onSetup((params) => {\r\n        const key = params.key;\r\n        if (!key) return false;\r\n\r\n        const item = this.value?.find((item) => item.key === key);\r\n        if (!item) return false;\r\n\r\n        return {\r\n          data: {\r\n            cropOptions: this.preselectedCrops,\r\n            hideFocalPoint: !this.focalPointEnabled,\r\n            key,\r\n            unique: item.mediaKey,\r\n            pickableFilter: this.#pickableFilter,\r\n          },\r\n          value: {\r\n            crops: item.crops ?? [],\r\n            focalPoint: item.focalPoint ?? { left: 0.5, top: 0.5 },\r\n            src: '',\r\n            key,\r\n            unique: item.mediaKey,\r\n          },\r\n        };\r\n      })\r\n      .onSubmit((value) => {\r\n        this.value = this.value?.map((item) => {\r\n          if (item.key !== value.key) return item;\r\n\r\n          const focalPoint = this.focalPointEnabled ? value.focalPoint : null;\r\n          const crops = value.crops;\r\n          const mediaKey = value.unique;\r\n\r\n          // Note: If the mediaKey changes we will change the key which causes cards to update\r\n          const key = mediaKey === item.mediaKey ? item.key : UmbId.new();\r\n\r\n          return { ...item, crops, mediaKey, focalPoint, key };\r\n        });\r\n\r\n        this.dispatchEvent(new UmbChangeEvent());\r\n      })\r\n      .observeRouteBuilder((routeBuilder) => {\r\n        this._routeBuilder = routeBuilder;\r\n      });\r\n\r\n    this.addValidator(\r\n      'valueMissing',\r\n      () => this.requiredMessage ?? UMB_VALIDATION_EMPTY_LOCALIZATION_KEY,\r\n      () => {\r\n        return !this.readonly && !!this.required && (!this.value || this.value.length === 0);\r\n      },\r\n    );\r\n\r\n    this.addValidator(\r\n      'rangeUnderflow',\r\n      () => this.minMessage,\r\n      () =>\r\n        !this.readonly &&\r\n        // Only if min is set:\r\n        !!this.min &&\r\n        // if the value is empty and not required, we should not validate the min:\r\n        !(this.value?.length === 0 && this.required == false) &&\r\n        // Validate the min:\r\n        (this.value?.length ?? 0) < this.min,\r\n    );\r\n    this.addValidator(\r\n      'rangeOverflow',\r\n      () => this.maxMessage,\r\n      () => !this.readonly && !!this.value && !!this.max && this.value?.length > this.max,\r\n    );\r\n  }\r\n\r\n  protected override getFormElement() {\r\n    return undefined;\r\n  }\r\n\r\n  async #populateCards() {\r\n    const mediaItems = this.#itemManager.getItems();\r\n\r\n    if (!mediaItems.length) {\r\n      this._cards = [];\r\n      return;\r\n    }\r\n    // Check if all media items is loaded.\r\n    // But notice, it would be nicer UX if we could show a loading state on the cards that are missing(loading) their items.\r\n    const missingCards = mediaItems.filter((item) => !this._cards.find((card) => card.unique === item.unique));\r\n    const removedCards = this._cards.filter((card) => !mediaItems.find((item) => card.unique === item.unique));\r\n    if (missingCards.length === 0 && removedCards.length === 0) return;\r\n\r\n    this._cards =\r\n      this.value?.map((item) => {\r\n        const media = mediaItems.find((x) => x.unique === item.mediaKey);\r\n        return {\r\n          unique: item.key,\r\n          media: item.mediaKey,\r\n          name: media?.name ?? '',\r\n          icon: media?.mediaType?.icon,\r\n          isTrashed: media?.isTrashed ?? false,\r\n        };\r\n      }) ?? [];\r\n  }\r\n\r\n  #pickableFilter: (item: UmbMediaItemModel) => boolean = (item) => {\r\n    if (this.allowedContentTypeIds && this.allowedContentTypeIds.length > 0) {\r\n      return this.allowedContentTypeIds.includes(item.mediaType.unique);\r\n    }\r\n    return true;\r\n  };\r\n\r\n  #addItems(uniques: string[]) {\r\n    if (!uniques.length) return;\r\n\r\n    const additions: Array<UmbMediaPickerPropertyValueEntry> = uniques.map((unique) => ({\r\n      key: UmbId.new(),\r\n      mediaKey: unique,\r\n      mediaTypeAlias: '',\r\n      crops: [],\r\n      focalPoint: null,\r\n    }));\r\n\r\n    this.value = [...(this.value ?? []), ...additions];\r\n    this.dispatchEvent(new UmbChangeEvent());\r\n  }\r\n\r\n  async #openPicker() {\r\n    const modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n    const modalHandler = modalManager?.open(this, UMB_MEDIA_PICKER_MODAL, {\r\n      data: {\r\n        multiple: this.multiple,\r\n        startNode: this.startNode,\r\n        pickableFilter: this.#pickableFilter,\r\n      },\r\n      value: { selection: [] },\r\n    });\r\n\r\n    const data = await modalHandler?.onSubmit().catch(() => null);\r\n    if (!data) return;\r\n\r\n    const selection = data.selection.filter((x) => x !== null) as string[];\r\n    this.#addItems(selection);\r\n  }\r\n\r\n  async #onRemove(item: RichMediaCardModel) {\r\n    await umbConfirmModal(this, {\r\n      color: 'danger',\r\n      headline: `${this.localize.term('actions_remove')} ${item.name}?`,\r\n      content: `${this.localize.term('defaultdialogs_confirmremove')} ${item.name}?`,\r\n      confirmLabel: this.localize.term('actions_remove'),\r\n    });\r\n\r\n    this.value = this.value?.filter((x) => x.key !== item.unique);\r\n\r\n    this.dispatchEvent(new UmbChangeEvent());\r\n  }\r\n\r\n  async #onUploadCompleted(e: CustomEvent) {\r\n    const completed = e.detail as Array<UmbUploadableItem>;\r\n    const uploaded = completed.map((file) => file.unique);\r\n    this.#addItems(uploaded);\r\n  }\r\n  //#endregion\r\n\r\n  override render() {\r\n    return html`\r\n    ${this.#renderDropzone()}\r\n    <div class=\"container\">${this.#renderItems()} ${this.#renderAddButton()}</div>\r\n  `;\r\n  }\r\n\r\n  #renderDropzone() {\r\n    if (this.readonly) return nothing;\r\n    if (this._cards && this._cards.length >= this.max) return;\r\n    return html`<umb-dropzone ?multiple=${this.max > 1} @complete=${this.#onUploadCompleted}></umb-dropzone>`;\r\n  }\r\n\r\n  #renderItems() {\r\n    if (!this._cards.length) return;\r\n    return html`\r\n    ${repeat(\r\n      this._cards,\r\n      (item) => item.unique,\r\n      (item) => this.#renderItem(item),\r\n    )}\r\n  `;\r\n  }\r\n\r\n  #renderAddButton() {\r\n    if (this._cards && this._cards.length && !this.multiple) return;\r\n    if (this.readonly && this._cards.length > 0) {\r\n      return nothing;\r\n    } else {\r\n      return html`\r\n      <uui-button\r\n        id=\"btn-add\"\r\n        look=\"placeholder\"\r\n        @blur=${() => {\r\n          this.pristine = false;\r\n          this.checkValidity();\r\n        }}\r\n        @click=${this.#openPicker}\r\n        label=${this.localize.term('general_choose')}\r\n        ?disabled=${this.readonly}>\r\n        <uui-icon name=\"icon-add\"></uui-icon>\r\n        ${this.localize.term('general_choose')}\r\n      </uui-button>\r\n    `;\r\n    }\r\n  }\r\n\r\n  #renderItem(item: RichMediaCardModel) {\r\n    const mediaItem = this.value?.length ? this.value[0] : undefined;\r\n    if (!item.unique || !mediaItem) return nothing;\r\n\r\n    const href = this.readonly ? undefined : this._routeBuilder?.({ key: item.unique });\r\n    return html`\r\n    <wysiwg-card-image id=${item.unique} name=${item.name} .href=${href} ?readonly=${this.readonly}>\r\n\r\n      <wysiwg-cropped-image .mediaItem=${mediaItem} @change=${this.#onChangePreview}></wysiwg-cropped-image>\r\n      ${this.#renderIsTrashed(item)} ${this.#renderActions(item)}\r\n\r\n    </wysiwg-card-image>\r\n  `;\r\n  }\r\n\r\n  #onChangePreview(event: CustomEvent & { target: WysiwgCroppedImageElement }) {\r\n    if (event?.target?.value?.length > 0) {\r\n      this._updateValue({\r\n        cropUrl: event?.target?.value,\r\n      });\r\n    }\r\n  }\r\n\r\n  private _updateValue(fieldsToUpdate: Partial<WysiwgMediaPickerPropertyValueEntry>, deleteImage: boolean = false) {\r\n    const newValue: WysiwgMediaPickerPropertyValues = [];\r\n    if (!this.value || !this.value.length || deleteImage) {\r\n      const item = {\r\n        ...fieldsToUpdate,\r\n      } as WysiwgMediaPickerPropertyValueEntry;\r\n      newValue.push(item);\r\n    } else {\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        const item = {\r\n          ...this.value[i],\r\n          ...fieldsToUpdate,\r\n        };\r\n        newValue.push(item);\r\n      }\r\n    }\r\n    this.value = newValue;\r\n    this.dispatchEvent(new UmbChangeEvent());\r\n  }\r\n\r\n  #renderActions(item: RichMediaCardModel) {\r\n    if (this.readonly) return nothing;\r\n    return html`\r\n    <uui-action-bar slot=\"actions\">\r\n      <uui-button label=${this.localize.term('general_remove')} look=\"secondary\" @click=${() => this.#onRemove(item)}>\r\n        <uui-icon name=\"icon-trash\"></uui-icon>\r\n      </uui-button>\r\n    </uui-action-bar>\r\n  `;\r\n  }\r\n\r\n  #renderIsTrashed(item: RichMediaCardModel) {\r\n    if (!item.isTrashed) return;\r\n    return html`\r\n    <uui-tag size=\"s\" slot=\"tag\" color=\"danger\">\r\n      <umb-localize key=\"mediaPicker_trashed\">Trashed</umb-localize>\r\n    </uui-tag>\r\n  `;\r\n  }\r\n\r\n  static override styles = [\r\n    css`\r\n    :host {\r\n      position: relative;\r\n    }\r\n\r\n    .container{\r\n      min-width: 150px;\r\n      min-height: 150px;\r\n      display: block;\r\n    }\r\n\r\n    #btn-add {\r\n      text-align: center;\r\n      min-height: 150px;\r\n      min-width: 150px;\r\n      width: 100%;\r\n    }\r\n\r\n    uui-icon {\r\n      display: block;\r\n      margin: 0 auto;\r\n    }\r\n\r\n    uui-card-media umb-icon {\r\n      font-size: var(--uui-size-8);\r\n    }\r\n\r\n    uui-card-media[drag-placeholder] {\r\n      opacity: 0.2;\r\n    }\r\n    img {\r\n      background-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"100\" fill-opacity=\".1\"><path d=\"M50 0h50v50H50zM0 50h50v50H0z\"/></svg>');\r\n      background-size: 10px 10px;\r\n      background-repeat: repeat;\r\n    }\r\n  `,\r\n  ];\r\n}\r\n\r\nexport default WysiwgInputRichMediaElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    [elementName]: WysiwgInputRichMediaElement;\r\n  }\r\n}\r\n","import {\r\n  UMB_MEDIA_ENTITY_TYPE,\r\n  UmbMediaPickerPropertyValueEntry,\r\n} from \"@umbraco-cms/backoffice/media\";\r\nimport {\r\n  css,\r\n  customElement,\r\n  html,\r\n  property,\r\n  state,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { UMB_PROPERTY_CONTEXT } from \"@umbraco-cms/backoffice/property\";\r\nimport {\r\n  UmbPropertyEditorConfigCollection,\r\n  UmbPropertyEditorUiElement,\r\n  UmbPropertyValueChangeEvent,\r\n} from \"@umbraco-cms/backoffice/property-editor\";\r\nimport type { UmbTreeStartNode } from \"@umbraco-cms/backoffice/tree\";\r\nimport {\r\n  UMB_VALIDATION_EMPTY_LOCALIZATION_KEY,\r\n  UmbFormControlMixin,\r\n} from \"@umbraco-cms/backoffice/validation\";\r\n\r\nimport {\r\n  UUISelectElement,\r\n  UUISelectEvent,\r\n} from \"@umbraco-cms/backoffice/external/uui\";\r\nimport {\r\n  WysiwgCropModel,\r\n  WysiwgMediaPickerPropertyValueEntry,\r\n  WysiwgMediaPickerPropertyValues,\r\n} from \"./types\";\r\nimport { CropsData, CropsResponse, MediaTypeModel, MediaTypesResponse, WysiwgUmbracoCommunityExtensionsService } from \"../../api\";\r\nimport { UmbNumberRangeValueType } from \"@umbraco-cms/backoffice/models\";\r\n\r\nimport type { WysiwgInputRichMediaElement } from \"./wysiwg-input-rich-media.element.js\";\r\nimport './wysiwg-input-rich-media.element.js';\r\n\r\n/**\r\n * based on @element umb-property-editor-ui-media-picker\r\n */\r\n\r\nconst elementName = \"wysiwg-image-and-crop-picker\";\r\n@customElement(elementName)\r\nexport class WysiwgImageAndCropPickerElement\r\n  extends UmbFormControlMixin<WysiwgMediaPickerPropertyValues | undefined, typeof UmbLitElement, undefined>(UmbLitElement)\r\n  implements UmbPropertyEditorUiElement {\r\n\r\n  //#region properties, states, ctor, methods\r\n  //#region properties\r\n  public set config(config: UmbPropertyEditorConfigCollection | undefined) {\r\n    if (!config) return;\r\n\r\n    this._allowedMediaTypes = config.getValueByAlias<string>(\"filter\")?.split(\",\") ?? [];\r\n    if (this._allowedMediaTypes.length === 0) {\r\n      this.getMediaTypes();\r\n    }\r\n    this._focalPointEnabled = Boolean(config.getValueByAlias(\"enableLocalFocalPoint\"));\r\n    this._multiple = Boolean(config.getValueByAlias(\"multiple\"));\r\n\r\n    this._preselectedCrops = config?.getValueByAlias<Array<WysiwgCropModel>>(\"crops\") ?? [];\r\n\r\n    if (this._preselectedCrops.length > 0) {\r\n      const defaultCrop = this._preselectedCrops.find((item) => !!item.defaultCrop);\r\n      this._selectedCropAlias = this.value?.[0]?.selectedCropAlias ?? defaultCrop?.alias ?? \"\";\r\n      const options = this._preselectedCrops.map((item) => ({\r\n        name: item.label?.toString() ?? item.alias,\r\n        value: item.alias,\r\n        selected: item.alias === this._selectedCropAlias,\r\n      })) as Array<Option & { invalid?: boolean }>;\r\n      this._options = [\r\n        { name: \"\", value: \"\", },\r\n        ...options,\r\n      ];\r\n    }\r\n\r\n    this.getImageCropperCrops();\r\n\r\n    const startNodeId = config.getValueByAlias<string>(\"startNodeId\") ?? \"\";\r\n    this._startNode = startNodeId ? { unique: startNodeId, entityType: UMB_MEDIA_ENTITY_TYPE } : undefined;\r\n\r\n    const minMax = config.getValueByAlias<UmbNumberRangeValueType>('validationLimit');\r\n    this._min = minMax?.min ?? 0;\r\n    this._max = minMax?.max ?? Infinity;\r\n  }\r\n\r\n  /**\r\n   * Sets the input to mandatory, meaning validation will fail if the value is empty.\r\n   * @type {boolean}\r\n   */\r\n  @property({ type: Boolean })\r\n  mandatory?: boolean;\r\n\r\n  @property({ type: String })\r\n  mandatoryMessage = UMB_VALIDATION_EMPTY_LOCALIZATION_KEY;\r\n\r\n  /**\r\n   * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n   * @type {boolean}\r\n   * @attr\r\n   * @default false\r\n   */\r\n  @property({ type: Boolean, reflect: true })\r\n  readonly = false\r\n\r\n  //#endregion\r\n\r\n  //#region states\r\n  @state()\r\n  private _startNode?: UmbTreeStartNode;\r\n\r\n  @state()\r\n  private _focalPointEnabled: boolean = false;\r\n\r\n  @state()\r\n  private _preselectedCrops: Array<WysiwgCropModel> = [];\r\n\r\n  @state()\r\n  private _allowedMediaTypes: Array<string> = [];\r\n\r\n  @state()\r\n  private _multiple: boolean = false;\r\n\r\n  @state()\r\n  private _min: number = 0;\r\n\r\n  @state()\r\n  private _max: number = Infinity;\r\n\r\n  @state()\r\n  private _alias?: string;\r\n\r\n  @state()\r\n  private _variantId?: string;\r\n\r\n  // additions\r\n  @state()\r\n  private _selectedCropAlias: string = \"\";\r\n\r\n  @state()\r\n  private _options: Array<Option & { invalid?: boolean }> = [];\r\n\r\n  @state()\r\n  private _mediaTypes?: Array<MediaTypeModel> = [];\r\n\r\n  @state()\r\n  private _imgSrc: string = \"\";\r\n  @state()\r\n  private _prevImgSrc: string = \"\";\r\n  //#endregion\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.consumeContext(UMB_PROPERTY_CONTEXT, (context) => {\r\n      this.observe(context?.alias,\r\n        (alias) => (this._alias = alias),\r\n        \"_observeAlias\");\r\n      this.observe(context?.variantId,\r\n        (variantId) => (this._variantId = variantId?.toString() || \"invariant\"),\r\n        \"_observeVariantId\");\r\n    });\r\n  }\r\n\r\n  override firstUpdated() {\r\n    this.addFormControlElement(this.shadowRoot!.querySelector(\"wysiwg-input-rich-media\")!);\r\n    const cropSelect = this.shadowRoot?.querySelector<UUISelectElement>(\"umb-input-dropdown-list\");\r\n    if (cropSelect) {\r\n      this.addFormControlElement(this.shadowRoot!.querySelector(\"umb-input-dropdown-list\")!);\r\n    }\r\n  }\r\n\r\n  override focus(options?: FocusOptions) {\r\n    console.log(\"focus(options) options = \", options);\r\n    return this.shadowRoot?.querySelector<WysiwgInputRichMediaElement>(\"wysiwg-input-rich-media\")?.focus();\r\n  }\r\n\r\n  private async getMediaTypes() {\r\n    await this.apiMediaTypes().then((data) => {\r\n      if (data === \"error\") {\r\n        this._mediaTypes = [];\r\n        return;\r\n      } else if (data === \"no data\") {\r\n        this._mediaTypes = [];\r\n        return;\r\n      }\r\n      const mediaTypes = data as Array<MediaTypeModel>;\r\n\r\n      this._mediaTypes = mediaTypes;\r\n      const imageType = this._mediaTypes?.find((type) => type.alias.toLowerCase() === \"image\");\r\n      this._allowedMediaTypes = !imageType?.key ? [] : [imageType.key];\r\n    });\r\n  }\r\n\r\n  private async apiMediaTypes(): Promise<MediaTypesResponse | \"error\" | \"no data\"> {\r\n    const { data, error } = await WysiwgUmbracoCommunityExtensionsService.mediaTypes();\r\n    if (error) {\r\n      console.error(error);\r\n    }\r\n    if (data !== undefined) {\r\n      return data;\r\n    }\r\n    return \"no data\";\r\n  }\r\n\r\n  private async getImageCropperCrops(mediaKey?: string) {\r\n    if (!this._selectedCropAlias) { this._selectedCropAlias = this.value?.[0]?.selectedCropAlias ?? \"\"; }\r\n    await this.crops(mediaKey).then((data) => {\r\n      if (data === \"error\") {\r\n        this._preselectedCrops = [];\r\n        return;\r\n      } else if (data === \"no data\") {\r\n        this._preselectedCrops = [];\r\n        return;\r\n      }\r\n      const imageCrops = data as Array<WysiwgCropModel>;\r\n      var newOptions = imageCrops.map((item) => ({\r\n        name: `[${(item.label?.toString() ?? item.alias)}]`,\r\n        value: item.alias,\r\n        selected: item.alias === this._selectedCropAlias,\r\n      }));\r\n\r\n      this._options = [\r\n        ...this._options,\r\n        ...newOptions,\r\n      ];\r\n    });\r\n  }\r\n\r\n  private async crops(mediaKey?: string): Promise<CropsResponse | \"error\" | \"no data\"> {\r\n    const options: CropsData = {\r\n      query: {\r\n        mediaItemId: mediaKey ?? \"\",\r\n      },\r\n    };\r\n\r\n    const { data, error } =\r\n      await WysiwgUmbracoCommunityExtensionsService.crops(options);\r\n\r\n    if (error) {\r\n      console.error(error);\r\n      return \"error\";\r\n    }\r\n\r\n    if (data !== undefined) {\r\n      return data;\r\n    }\r\n\r\n    return \"no data\";\r\n  }\r\n\r\n  #onChangeImage(event: CustomEvent & { target: WysiwgInputRichMediaElement }) {\r\n    if (this._imgSrc !== this._prevImgSrc) {\r\n      console.debug(\"imgSrc changed\", this._imgSrc, this._prevImgSrc);\r\n      this._prevImgSrc = this._imgSrc;\r\n    }\r\n\r\n    const isEmpty = event.target.value?.length === 0;\r\n    const mediaItems: UmbMediaPickerPropertyValueEntry | undefined =\r\n      event.target.value?.find((item) => !!item.mediaKey) ?? undefined;\r\n    let newValue = isEmpty ? undefined : mediaItems;\r\n\r\n    const selectedCropAlias = this.value?.[0]?.selectedCropAlias ?? this._selectedCropAlias;\r\n\r\n    if (isEmpty) {\r\n      this._updateValue({\r\n        selectedCropAlias: selectedCropAlias,\r\n      }, true);\r\n    } else {\r\n      const crops = (newValue?.crops.length === 0) ? this._preselectedCrops : newValue?.crops;\r\n      this._updateValue({\r\n        key: newValue?.key,\r\n        mediaKey: newValue?.mediaKey,\r\n        mediaTypeAlias: newValue?.mediaTypeAlias,\r\n        focalPoint: newValue?.focalPoint,\r\n        crops: crops,\r\n        selectedCropAlias: selectedCropAlias,\r\n      } as UmbMediaPickerPropertyValueEntry);\r\n    }\r\n  }\r\n\r\n  #onChangeCrop(event: UUISelectEvent) {\r\n    const value = event.target.value as string;\r\n    this._selectedCropAlias = value;\r\n\r\n    this._updateValue({\r\n      selectedCropAlias: this._selectedCropAlias,\r\n    });\r\n  }\r\n\r\n  private _updateValue(fieldsToUpdate: Partial<WysiwgMediaPickerPropertyValueEntry>, deleteImage: boolean = false) {\r\n    const newValue: WysiwgMediaPickerPropertyValues = [];\r\n    if (!this.value || !this.value.length || deleteImage) {\r\n      const item = {\r\n        ...fieldsToUpdate,\r\n      } as WysiwgMediaPickerPropertyValueEntry;\r\n      newValue.push(item);\r\n    } else {\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        const item = {\r\n          ...this.value[i],\r\n          ...fieldsToUpdate,\r\n        };\r\n        newValue.push(item);\r\n      }\r\n    }\r\n    this.value = newValue;\r\n    this.dispatchEvent(new UmbPropertyValueChangeEvent());\r\n  }\r\n\r\n  render() {\r\n    return html`\r\n    <div id=\"container\">\r\n      <div id=\"left\">\r\n        ${this.#renderEditImage()}\r\n        ${this.#renderDropdown()}\r\n      </div>\r\n    </div>`;\r\n  }\r\n\r\n  #renderEditImage() {\r\n    return html`\r\n    <wysiwg-input-rich-media\r\n      .alias=${this._alias}\r\n      .allowedContentTypeIds=${this._allowedMediaTypes}\r\n      .focalPointEnabled=${this._focalPointEnabled}\r\n      .value=${this.value ?? []}\r\n      .max=${this._max}\r\n      .min=${this._min}\r\n      .preselectedCrops=${this._preselectedCrops}\r\n      .startNode=${this._startNode}\r\n      .variantId=${this._variantId}\r\n      .required=${this.mandatory}\r\n      .requiredMessage=${this.mandatoryMessage}\r\n      ?multiple=${this._multiple}\r\n      @change=${this.#onChangeImage}\r\n      ?readonly=${this.readonly}\r\n    >\r\n    </wysiwg-input-rich-media>\r\n  `;\r\n  }\r\n\r\n  #renderDropdown() {\r\n    const enabled = !!this.value?.length && !!this.value[0]?.mediaKey;\r\n    const label = \"crop-select\";\r\n\r\n    if (!this._options.length) return html`<uui-select label=${label}></uui-select>`;\r\n\r\n    return html`\r\n      <uui-select\r\n        label=${label}\r\n        .disabled=${!enabled}\r\n        .options=${this._options}\r\n        @change=${this.#onChangeCrop}\r\n        ?readonly=${this.readonly}\r\n      ></uui-select>\r\n    `;\r\n  }\r\n  //#endregion\r\n\r\n  static override readonly styles = [\r\n    UUISelectElement.styles,\r\n    css`\r\n      uui-select {\r\n        margin-top: 8px;\r\n      }\r\n\r\n      :host {\r\n        display: inline;\r\n      }\r\n\r\n      #container {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        row-gap: 20px;\r\n        column-gap: 20px;\r\n        width: 100%;\r\n        min-width: 150px;\r\n        height: 100%;\r\n      }\r\n\r\n      #left, #right {\r\n        display: flex;\r\n        flex-direction: column;\r\n        position: relative;\r\n        width: 100%;\r\n        max-width: 200px;\r\n        min-width: 100px;\r\n      }\r\n      #left {\r\n        margin-right: 20px;\r\n      }\r\n    `,\r\n  ];\r\n}\r\n\r\nexport { WysiwgImageAndCropPickerElement as element };\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    [elementName]: WysiwgImageAndCropPickerElement;\r\n  }\r\n}\r\n"],"names":["_sorter","_focalPointEnabled","_readonly","_itemManager","_WysiwgInputRichMediaElement_instances","populateCards_fn","_pickableFilter","addItems_fn","openPicker_fn","onRemove_fn","onUploadCompleted_fn","renderDropzone_fn","renderItems_fn","renderAddButton_fn","renderItem_fn","onChangePreview_fn","renderActions_fn","renderIsTrashed_fn","elementName","WysiwgInputRichMediaElement","UmbFormControlMixin","UmbLitElement","__privateAdd","UmbSorterController","element","modelEntry","UmbSorterResolvePlacementAsGrid","model","UmbChangeEvent","UmbRepositoryItemsManager","UMB_MEDIA_ITEM_REPOSITORY_ALIAS","item","__privateGet","__privateMethod","UmbModalRouteRegistrationController","UMB_IMAGE_CROPPER_EDITOR_MODAL","params","key","_a","value","focalPoint","crops","mediaKey","UmbId","routeBuilder","UMB_VALIDATION_EMPTY_LOCALIZATION_KEY","_b","x","__privateSet","html","fieldsToUpdate","deleteImage","newValue","i","mediaItems","missingCards","card","removedCards","media","uniques","additions","unique","modalManager","UMB_MODAL_MANAGER_CONTEXT","modalHandler","UMB_MEDIA_PICKER_MODAL","data","selection","umbConfirmModal","uploaded","file","nothing","repeat","mediaItem","href","event","_c","css","__decorateClass","property","state","customElement","_WysiwgImageAndCropPickerElement_instances","onChangeImage_fn","onChangeCrop_fn","renderEditImage_fn","renderDropdown_fn","WysiwgImageAndCropPickerElement","UMB_PROPERTY_CONTEXT","context","alias","variantId","config","defaultCrop","options","startNodeId","UMB_MEDIA_ENTITY_TYPE","minMax","mediaTypes","imageType","type","error","WysiwgUmbracoCommunityExtensionsService","newOptions","UmbPropertyValueChangeEvent","isEmpty","selectedCropAlias","_d","enabled","label","UUISelectElement"],"mappings":";;;;;;;;;;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AA0BA,MAAMC,KAAc;AAEb,IAAMC,IAAN,cAA0CC,EAI/CC,GAAe,MAAS,EAAE;AAAA,EAmJ1B,cAAc;AACN,UAAA,GAxJHC,EAAA,MAAAlB,CAAA,GAMKkB,EAAA,MAAAtB,GAAA,IAAIuB,GAAsD,MAAM;AAAA,MACxE,oBAAoB,CAACC,MACZA,EAAQ;AAAA,MAEjB,kBAAkB,CAACC,MACVA,EAAW;AAAA,MAEpB,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,mBAAmB;AAAA,MACnB,kBAAkBC;AAAA,MAClB,UAAU,CAAC,EAAE,OAAAC,QAAY;AACvB,aAAK,QAAQA,GACR,KAAA,cAAc,IAAIC,GAAgB;AAAA,MAAA;AAAA,IACzC,CACD,CAAA,GAmBD,KAAO,MAAM,GASA,KAAA,aAAA,8BASb,KAAO,MAAM,OASA,KAAA,aAAA,kDAqBF,KAAA,WAAA,IAYmBN,EAAA,MAAArB,GAAA,EAAA,GAyClBqB,EAAA,MAAApB,GAAA,EAAA,GAGZ,KAAQ,SAAoC,CAAC,GAK7CoB,EAAA,MAASnB,GAAe,IAAI0B,GAA6C,MAAMC,EAA+B,CAAA,GAgH9GR,EAAA,MAAAhB,GAAwD,CAACyB,MACnD,KAAK,yBAAyB,KAAK,sBAAsB,SAAS,IAC7D,KAAK,sBAAsB,SAASA,EAAK,UAAU,MAAM,IAE3D,EACT,GAhHE,KAAK,QAAQC,EAAA,MAAK7B,CAAa,EAAA,OAAO,MAAM;AAC1C8B,MAAAA,EAAA,MAAK7B,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,IAAA,CACD,GAEG,IAAA6B,GAAoC,MAAMC,EAA8B,EACzE,kBAAkB,MAAM,EACxB,QAAQ,CAACC,MAAW;;AACnB,YAAMC,IAAMD,EAAO;AACf,UAAA,CAACC,EAAY,QAAA;AAEX,YAAAN,KAAOO,IAAA,KAAK,UAAL,gBAAAA,EAAY,KAAK,CAACP,MAASA,EAAK,QAAQM;AACjD,aAACN,IAEE;AAAA,QACL,MAAM;AAAA,UACJ,aAAa,KAAK;AAAA,UAClB,gBAAgB,CAAC,KAAK;AAAA,UACtB,KAAAM;AAAA,UACA,QAAQN,EAAK;AAAA,UACb,gBAAgBC,EAAK,MAAA1B,CAAA;AAAA,QACvB;AAAA,QACA,OAAO;AAAA,UACL,OAAOyB,EAAK,SAAS,CAAC;AAAA,UACtB,YAAYA,EAAK,cAAc,EAAE,MAAM,KAAK,KAAK,IAAI;AAAA,UACrD,KAAK;AAAA,UACL,KAAAM;AAAA,UACA,QAAQN,EAAK;AAAA,QAAA;AAAA,MAEjB,IAjBkB;AAAA,IAiBlB,CACD,EACA,SAAS,CAACQ,MAAU;;AACnB,WAAK,SAAQD,IAAA,KAAK,UAAL,gBAAAA,EAAY,IAAI,CAACP,MAAS;AACrC,YAAIA,EAAK,QAAQQ,EAAM,IAAY,QAAAR;AAEnC,cAAMS,IAAa,KAAK,oBAAoBD,EAAM,aAAa,MACzDE,IAAQF,EAAM,OACdG,IAAWH,EAAM,QAGjBF,IAAMK,MAAaX,EAAK,WAAWA,EAAK,MAAMY,EAAM,IAAI;AAE9D,eAAO,EAAE,GAAGZ,GAAM,OAAAU,GAAO,UAAAC,GAAU,YAAAF,GAAY,KAAAH,EAAI;AAAA,MAAA,IAGhD,KAAA,cAAc,IAAIT,GAAgB;AAAA,IAAA,CACxC,EACA,oBAAoB,CAACgB,MAAiB;AACrC,WAAK,gBAAgBA;AAAA,IAAA,CACtB,GAEE,KAAA;AAAA,MACH;AAAA,MACA,MAAM,KAAK,mBAAmBC;AAAA,MAC9B,MACS,CAAC,KAAK,YAAY,CAAC,CAAC,KAAK,aAAa,CAAC,KAAK,SAAS,KAAK,MAAM,WAAW;AAAA,IAEtF,GAEK,KAAA;AAAA,MACH;AAAA,MACA,MAAM,KAAK;AAAA,MACX,MACE;;AAAA,gBAAC,KAAK;AAAA,QAEN,CAAC,CAAC,KAAK;AAAA,QAEP,IAAEP,IAAA,KAAK,UAAL,gBAAAA,EAAY,YAAW,KAAK,KAAK,YAAY;AAAA,WAE9CQ,IAAA,KAAK,UAAL,gBAAAA,EAAY,WAAU,KAAK,KAAK;AAAA;AAAA,IACrC,GACK,KAAA;AAAA,MACH;AAAA,MACA,MAAM,KAAK;AAAA,MACX,MAAA;;AAAM,gBAAC,KAAK,YAAY,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC,KAAK,SAAOR,IAAA,KAAK,UAAL,gBAAAA,EAAY,UAAS,KAAK;AAAA;AAAA,IAClF;AAAA,EAAA;AAAA,EA9JF,IAAoB,MAAMC,GAA4D;AACpF,UAAM,QAAQA,GACTP,EAAA,MAAAhC,CAAA,EAAQ,SAASuC,CAAK,GACtBP,EAAA,MAAA7B,CAAA,EAAa,WAAWoC,KAAA,gBAAAA,EAAO,IAAI,CAACQ,MAAMA,EAAE,SAAS,GAE1Dd,EAAA,MAAK7B,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,EAAA;AAAA,EAEF,IAAoB,QAA6D;AAC/E,WAAO,MAAM;AAAA,EAAA;AAAA,EAgBf,IAAW,kBAAkBkC,GAAgB;AAC3C,IAAAS,EAAA,MAAK/C,GAAqBsC,CAAA;AAAA,EAAA;AAAA,EAE5B,IAAW,oBAA6B;AACtC,WAAOP,EAAK,MAAA/B,CAAA;AAAA,EAAA;AAAA;AAAA,EAMd,IAAW,MAAMsC,GAA2B;AAAA,EAC5B;AAAA,EAGhB,IAAW,QAA4B;AAAA,EAC9B;AAAA;AAAA,EAKT,IAAW,UAAUA,GAA0C;AAAA,EAC/C;AAAA,EAGhB,IAAW,YAAgC;AAAA,EAClC;AAAA,EAUT,IAAW,WAAW;AACpB,WAAOP,EAAK,MAAA9B,CAAA;AAAA,EAAA;AAAA,EAEd,IAAW,SAASqC,GAAO;AACzB,IAAAS,EAAA,MAAK9C,GAAYqC,CAAA,GAEbP,QAAK9B,CAAW,IAClB8B,EAAA,MAAKhC,GAAQ,QAAQ,IAErBgC,EAAA,MAAKhC,GAAQ,OAAO;AAAA,EACtB;AAAA,EA4FiB,iBAAiB;AAAA,EAC3B;AAAA;AAAA,EAyFA,SAAS;AACT,WAAAiD;AAAA,MACLhB,EAAA,MAAK7B,MAAL,KAAsB,IAAA,CAAA;AAAA,6BACC6B,QAAK7B,GAALQ,CAAA,EAAA,KAAA,IAAA,CAAmB,IAAIqB,EAAA,MAAK7B,MAAL,KAAuB,IAAA,CAAA;AAAA;AAAA,EAAA;AAAA,EAmEjE,aAAa8C,GAA8DC,IAAuB,IAAO;AAC/G,UAAMC,IAA4C,CAAC;AACnD,QAAI,CAAC,KAAK,SAAS,CAAC,KAAK,MAAM,UAAUD,GAAa;AACpD,YAAMpB,IAAO;AAAA,QACX,GAAGmB;AAAA,MACL;AACA,MAAAE,EAAS,KAAKrB,CAAI;AAAA,IAAA;AAElB,eAASsB,IAAI,GAAGA,IAAI,KAAK,MAAM,QAAQA,KAAK;AAC1C,cAAMtB,IAAO;AAAA,UACX,GAAG,KAAK,MAAMsB,CAAC;AAAA,UACf,GAAGH;AAAA,QACL;AACA,QAAAE,EAAS,KAAKrB,CAAI;AAAA,MAAA;AAGtB,SAAK,QAAQqB,GACR,KAAA,cAAc,IAAIxB,GAAgB;AAAA,EAAA;AA6D3C;AA/cE5B,IAAA,oBAAA,QAAA;AA8FAC,IAAA,oBAAA,QAAA;AAyCAC,IAAA,oBAAA,QAAA;AAQSC,IAAA,oBAAA,QAAA;AArJJC,IAAA,oBAAA,QAAA;AA2OCC,IAAc,iBAAG;;AACf,QAAAiD,IAAatB,EAAK,MAAA7B,CAAA,EAAa,SAAS;AAE1C,MAAA,CAACmD,EAAW,QAAQ;AACtB,SAAK,SAAS,CAAC;AACf;AAAA,EAAA;AAIF,QAAMC,IAAeD,EAAW,OAAO,CAACvB,MAAS,CAAC,KAAK,OAAO,KAAK,CAACyB,MAASA,EAAK,WAAWzB,EAAK,MAAM,CAAC,GACnG0B,IAAe,KAAK,OAAO,OAAO,CAACD,MAAS,CAACF,EAAW,KAAK,CAACvB,MAASyB,EAAK,WAAWzB,EAAK,MAAM,CAAC;AACzG,EAAIwB,EAAa,WAAW,KAAKE,EAAa,WAAW,MAEzD,KAAK,WACHnB,IAAA,KAAK,UAAL,gBAAAA,EAAY,IAAI,CAACP,MAAS;;AAClB,UAAA2B,IAAQJ,EAAW,KAAK,CAACP,MAAMA,EAAE,WAAWhB,EAAK,QAAQ;AACxD,WAAA;AAAA,MACL,QAAQA,EAAK;AAAA,MACb,OAAOA,EAAK;AAAA,MACZ,OAAM2B,KAAA,gBAAAA,EAAO,SAAQ;AAAA,MACrB,OAAMpB,IAAAoB,KAAA,gBAAAA,EAAO,cAAP,gBAAApB,EAAkB;AAAA,MACxB,YAAWoB,KAAA,gBAAAA,EAAO,cAAa;AAAA,IACjC;AAAA,EACD,OAAK,CAAC;AACX;AAEApD,IAAA,oBAAA,QAAA;AAOAC,IAAS,SAACoD,GAAmB;AACvB,MAAA,CAACA,EAAQ,OAAQ;AAErB,QAAMC,IAAqDD,EAAQ,IAAI,CAACE,OAAY;AAAA,IAClF,KAAKlB,EAAM,IAAI;AAAA,IACf,UAAUkB;AAAA,IACV,gBAAgB;AAAA,IAChB,OAAO,CAAC;AAAA,IACR,YAAY;AAAA,EAAA,EACZ;AAEG,OAAA,QAAQ,CAAC,GAAI,KAAK,SAAS,CAAA,GAAK,GAAGD,CAAS,GAC5C,KAAA,cAAc,IAAIhC,GAAgB;AACzC;AAEMpB,IAAW,iBAAG;AAClB,QAAMsD,IAAe,MAAM,KAAK,WAAWC,EAAyB,GAC9DC,IAAeF,KAAA,gBAAAA,EAAc,KAAK,MAAMG,IAAwB;AAAA,IACpE,MAAM;AAAA,MACJ,UAAU,KAAK;AAAA,MACf,WAAW,KAAK;AAAA,MAChB,gBAAgBjC,EAAK,MAAA1B,CAAA;AAAA,IACvB;AAAA,IACA,OAAO,EAAE,WAAW,CAAG,EAAA;AAAA,EAAA,IAGnB4D,IAAO,OAAMF,KAAA,gBAAAA,EAAc,WAAW,MAAM,MAAM;AACxD,MAAI,CAACE,EAAM;AAEX,QAAMC,IAAYD,EAAK,UAAU,OAAO,CAACnB,MAAMA,MAAM,IAAI;AACzDd,EAAAA,EAAA,MAAK7B,MAAL,KAAe,MAAA+D,CAAA;AACjB;AAEM1D,IAAS,eAACsB,GAA0B;;AACxC,QAAMqC,GAAgB,MAAM;AAAA,IAC1B,OAAO;AAAA,IACP,UAAU,GAAG,KAAK,SAAS,KAAK,gBAAgB,CAAC,IAAIrC,EAAK,IAAI;AAAA,IAC9D,SAAS,GAAG,KAAK,SAAS,KAAK,8BAA8B,CAAC,IAAIA,EAAK,IAAI;AAAA,IAC3E,cAAc,KAAK,SAAS,KAAK,gBAAgB;AAAA,EAAA,CAClD,GAEI,KAAA,SAAQO,IAAA,KAAK,UAAL,gBAAAA,EAAY,OAAO,CAACS,MAAMA,EAAE,QAAQhB,EAAK,SAEjD,KAAA,cAAc,IAAIH,GAAgB;AACzC;AAEMlB,IAAkB,eAAC,GAAgB;AAEvC,QAAM2D,IADY,EAAE,OACO,IAAI,CAACC,MAASA,EAAK,MAAM;AACpDrC,EAAAA,EAAA,MAAK7B,MAAL,KAAe,MAAAiE,CAAA;AACjB;AAUA1D,IAAe,WAAG;AACZ,MAAA,KAAK,SAAiB,QAAA4D;AAC1B,MAAI,OAAK,UAAU,KAAK,OAAO,UAAU,KAAK;AAC9C,WAAOtB,4BAA+B,KAAK,MAAM,CAAC,cAAchB,QAAK7B,GAAkBM,CAAA,CAAA;AACzF;AAEAE,IAAY,WAAG;AACT,MAAC,KAAK,OAAO;AACV,WAAAqC;AAAA,MACLuB;AAAA,MACA,KAAK;AAAA,MACL,CAACzC,MAASA,EAAK;AAAA,MACf,CAACA,MAASE,EAAK,MAAA7B,GAAAU,CAAA,EAAL,KAAiB,MAAAiB,CAAA;AAAA,IAC5B,CAAA;AAAA;AAEH;AAEAlB,IAAgB,WAAG;AACjB,MAAI,OAAK,UAAU,KAAK,OAAO,UAAU,CAAC,KAAK;AAC/C,WAAI,KAAK,YAAY,KAAK,OAAO,SAAS,IACjC0D,IAEAtB;AAAA;AAAA;AAAA;AAAA,gBAIG,MAAM;AACZ,WAAK,WAAW,IAChB,KAAK,cAAc;AAAA,IACpB,CAAA;AAAA,iBACQhB,QAAK7B,GAAWI,CAAA,CAAA;AAAA,gBACjB,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA,oBAChC,KAAK,QAAQ;AAAA;AAAA,UAEvB,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA;AAAA;AAI5C;AAEAM,IAAW,SAACiB,GAA0B;;AACpC,QAAM0C,KAAYnC,IAAA,KAAK,UAAL,QAAAA,EAAY,SAAS,KAAK,MAAM,CAAC,IAAI;AACvD,MAAI,CAACP,EAAK,UAAU,CAAC0C,EAAkB,QAAAF;AAEjC,QAAAG,IAAO,KAAK,aAAuB5B,IAAA,KAAK,kBAAL,OAAZ,SAAYA,EAAA,WAAqB,EAAE,KAAKf,EAAK;AACnE,SAAAkB;AAAA,4BACiBlB,EAAK,MAAM,SAASA,EAAK,IAAI,UAAU2C,CAAI,cAAc,KAAK,QAAQ;AAAA;AAAA,yCAEzDD,CAAS,YAAYxC,EAAA,MAAK7B,GAAgBW,CAAA,CAAA;AAAA,QAC3EkB,EAAA,MAAK7B,MAAL,KAAsB,MAAA2B,CAAA,CAAK,IAAIE,EAAK,MAAA7B,GAAAY,CAAA,EAAL,WAAoBe,CAAK,CAAA;AAAA;AAAA;AAAA;AAI9D;AAEAhB,IAAgB,SAAC4D,GAA4D;;AAC3E,IAAI7B,KAAAR,IAAAqC,KAAA,gBAAAA,EAAO,WAAP,gBAAArC,EAAe,UAAf,gBAAAQ,EAAsB,UAAS,KACjC,KAAK,aAAa;AAAA,IAChB,UAAS8B,IAAAD,KAAA,gBAAAA,EAAO,WAAP,gBAAAC,EAAe;AAAA,EAAA,CACzB;AAEL;AAsBA5D,IAAc,SAACe,GAA0B;AACnC,SAAA,KAAK,WAAiBwC,IACnBtB;AAAA;AAAA,0BAEe,KAAK,SAAS,KAAK,gBAAgB,CAAC,4BAA4B,MAAMhB,EAAA,MAAK7B,GAALK,CAAA,EAAA,KAAA,MAAesB,CAAK,CAAA;AAAA;AAAA;AAAA;AAAA;AAKlH;AAEAd,IAAgB,SAACc,GAA0B;AACrC,MAACA,EAAK;AACH,WAAAkB;AAAA;AAAA;AAAA;AAAA;AAKT;AA7aW9B,EA+aK,SAAS;AAAA,EACvB0D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoCF;AAxbAC,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GA3BhB5D,EA4BX,WAAA,YAAA,CAAA;AAGA2D,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GA9Bf5D,EA+BX,WAAA,mBAAA,CAAA;AASO2D,EAAA;AAAA,EADNC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAvCf5D,EAwCJ,WAAA,OAAA,CAAA;AASP2D,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAQ,WAAW,cAAe,CAAA;AAAA,GAhDzC5D,EAiDX,WAAA,cAAA,CAAA;AASO2D,EAAA;AAAA,EADNC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAzDf5D,EA0DJ,WAAA,OAAA,CAAA;AASP2D,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAQ,WAAW,cAAe,CAAA;AAAA,GAlEzC5D,EAmEX,WAAA,cAAA,CAAA;AAGoB2D,EAAA;AAAA,EADnBC,EAAS,EAAE,MAAM,MAAO,CAAA;AAAA,GArEd5D,EAsES,WAAA,SAAA,CAAA;AAYpB2D,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,MAAO,CAAA;AAAA,GAjFd5D,EAkFX,WAAA,yBAAA,CAAA;AAGA2D,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAQ,WAAW,GAAO,CAAA;AAAA,GApFjC5D,EAqFX,WAAA,aAAA,CAAA;AAGA2D,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GAvFhB5D,EAwFX,WAAA,YAAA,CAAA;AAGO2D,EAAA;AAAA,EADNC,EAAS,EAAE,MAAM,MAAO,CAAA;AAAA,GA1Fd5D,EA2FJ,WAAA,oBAAA,CAAA;AAGI2D,EAAA;AAAA,EADVC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GA7FhB5D,EA8FA,WAAA,qBAAA,CAAA;AAUA2D,EAAA;AAAA,EAFVC,EAAS;AAAA,GAtGC5D,EAwGA,WAAA,SAAA,CAAA;AAUA2D,EAAA;AAAA,EAFVC,EAAS;AAAA,GAhHC5D,EAkHA,WAAA,aAAA,CAAA;AAeA2D,EAAA;AAAA,EADVC,EAAS,EAAE,MAAM,SAAS,SAAS,GAAM,CAAA;AAAA,GAhI/B5D,EAiIA,WAAA,YAAA,CAAA;AAeH2D,EAAA;AAAA,EADPE,EAAM;AAAA,GA/II7D,EAgJH,WAAA,UAAA,CAAA;AAGA2D,EAAA;AAAA,EADPE,EAAM;AAAA,GAlJI7D,EAmJH,WAAA,iBAAA,CAAA;AAnJGA,IAAN2D,EAAA;AAAA,EADNG,EAAc/D,EAAW;AAAA,GACbC,CAAA;;;;;;;iPC5Bb+D,GAAAC,GAAAC,IAAAC,IAAAC;AA2CA,MAAMpE,KAAc;AAEb,IAAMqE,IAAN,cACGnE,EAAkGC,CAAa,EACjF;AAAA;AAAA,EAyGtC,cAAc;AACN,UAAA,GA5GHC,GAAA,MAAA4D,CAAA,GAkDc,KAAA,mBAAArC,GASR,KAAA,WAAA,IASX,KAAQ,qBAA8B,IAGtC,KAAQ,oBAA4C,CAAC,GAGrD,KAAQ,qBAAoC,CAAC,GAG7C,KAAQ,YAAqB,IAG7B,KAAQ,OAAe,GAGvB,KAAQ,OAAe,OAUvB,KAAQ,qBAA6B,IAGrC,KAAQ,WAAkD,CAAC,GAG3D,KAAQ,cAAsC,CAAC,GAG/C,KAAQ,UAAkB,IAE1B,KAAQ,cAAsB,IAMvB,KAAA,eAAe2C,IAAsB,CAACC,MAAY;AAChD,WAAA;AAAA,QAAQA,KAAA,gBAAAA,EAAS;AAAA,QACpB,CAACC,MAAW,KAAK,SAASA;AAAA,QAC1B;AAAA,MAAe,GACZ,KAAA;AAAA,QAAQD,KAAA,gBAAAA,EAAS;AAAA,QACpB,CAACE,MAAe,KAAK,cAAaA,KAAA,gBAAAA,EAAW,eAAc;AAAA,QAC3D;AAAA,MAAmB;AAAA,IAAA,CACtB;AAAA,EAAA;AAAA;AAAA;AAAA,EA/GH,IAAW,OAAOC,GAAuD;;AACvE,QAAI,CAACA,EAAQ;AAWT,QATC,KAAA,uBAAqBtD,IAAAsD,EAAO,gBAAwB,QAAQ,MAAvC,gBAAAtD,EAA0C,MAAM,SAAQ,CAAC,GAC/E,KAAK,mBAAmB,WAAW,KACrC,KAAK,cAAc,GAErB,KAAK,qBAAqB,EAAQsD,EAAO,gBAAgB,uBAAuB,GAChF,KAAK,YAAY,EAAQA,EAAO,gBAAgB,UAAU,GAE1D,KAAK,qBAAoBA,KAAA,gBAAAA,EAAQ,gBAAwC,aAAY,CAAC,GAElF,KAAK,kBAAkB,SAAS,GAAG;AAC/B,YAAAC,IAAc,KAAK,kBAAkB,KAAK,CAAC9D,MAAS,CAAC,CAACA,EAAK,WAAW;AAC5E,WAAK,uBAAqB6C,KAAA9B,IAAA,KAAK,UAAL,gBAAAA,EAAa,OAAb,gBAAA8B,EAAiB,uBAAqBiB,KAAA,gBAAAA,EAAa,UAAS;AACtF,YAAMC,IAAU,KAAK,kBAAkB,IAAI,CAAC/D,MAAU;;AAAA;AAAA,UACpD,QAAMO,IAAAP,EAAK,UAAL,gBAAAO,EAAY,eAAcP,EAAK;AAAA,UACrC,OAAOA,EAAK;AAAA,UACZ,UAAUA,EAAK,UAAU,KAAK;AAAA,QAAA;AAAA,OAC9B;AACF,WAAK,WAAW;AAAA,QACd,EAAE,MAAM,IAAI,OAAO,GAAI;AAAA,QACvB,GAAG+D;AAAA,MACL;AAAA,IAAA;AAGF,SAAK,qBAAqB;AAE1B,UAAMC,IAAcH,EAAO,gBAAwB,aAAa,KAAK;AACrE,SAAK,aAAaG,IAAc,EAAE,QAAQA,GAAa,YAAYC,OAA0B;AAEvF,UAAAC,IAASL,EAAO,gBAAyC,iBAAiB;AAC3E,SAAA,QAAOK,KAAA,gBAAAA,EAAQ,QAAO,GACtB,KAAA,QAAOA,KAAA,gBAAAA,EAAQ,QAAO;AAAA,EAAA;AAAA,EAiFpB,eAAe;;AACtB,SAAK,sBAAsB,KAAK,WAAY,cAAc,yBAAyB,CAAE,KAClE3D,IAAA,KAAK,eAAL,gBAAAA,EAAiB,cAAgC,+BAElE,KAAK,sBAAsB,KAAK,WAAY,cAAc,yBAAyB,CAAE;AAAA,EACvF;AAAA,EAGO,MAAMwD,GAAwB;;AAC7B,mBAAA,IAAI,6BAA6BA,CAAO,IACzChD,KAAAR,IAAA,KAAK,eAAL,gBAAAA,EAAiB,cAA2C,+BAA5D,gBAAAQ,EAAwF;AAAA,EAAM;AAAA,EAGvG,MAAc,gBAAgB;AAC5B,UAAM,KAAK,cAAA,EAAgB,KAAK,CAACoB,MAAS;;AACxC,UAAIA,MAAS,SAAS;AACpB,aAAK,cAAc,CAAC;AACpB;AAAA,MAAA,WACSA,MAAS,WAAW;AAC7B,aAAK,cAAc,CAAC;AACpB;AAAA,MAAA;AAEF,YAAMgC,IAAahC;AAEnB,WAAK,cAAcgC;AACb,YAAAC,KAAY7D,IAAA,KAAK,gBAAL,gBAAAA,EAAkB,KAAK,CAAC8D,MAASA,EAAK,MAAM,YAAY,MAAM;AAC3E,WAAA,qBAAsBD,KAAA,QAAAA,EAAW,MAAW,CAACA,EAAU,GAAG,IAAnB;IAAmB,CAChE;AAAA,EAAA;AAAA,EAGH,MAAc,gBAAmE;AAC/E,UAAM,EAAE,MAAAjC,GAAM,OAAAmC,EAAU,IAAA,MAAMC,EAAwC,WAAW;AAIjF,WAHID,KACF,QAAQ,MAAMA,CAAK,GAEjBnC,MAAS,SACJA,IAEF;AAAA,EAAA;AAAA,EAGT,MAAc,qBAAqBxB,GAAmB;;AAChD,IAAC,KAAK,uBAAsB,KAAK,uBAAqBI,KAAAR,IAAA,KAAK,UAAL,gBAAAA,EAAa,OAAb,gBAAAQ,EAAiB,sBAAqB,KAChG,MAAM,KAAK,MAAMJ,CAAQ,EAAE,KAAK,CAACwB,MAAS;AACxC,UAAIA,MAAS,SAAS;AACpB,aAAK,oBAAoB,CAAC;AAC1B;AAAA,MAAA,WACSA,MAAS,WAAW;AAC7B,aAAK,oBAAoB,CAAC;AAC1B;AAAA,MAAA;AAGF,UAAIqC,IADerC,EACS,IAAI,CAACnC,MAAU;;AAAA;AAAA,UACzC,MAAM,MAAKO,IAAAP,EAAK,UAAL,gBAAAO,EAAY,eAAcP,EAAK,KAAM;AAAA,UAChD,OAAOA,EAAK;AAAA,UACZ,UAAUA,EAAK,UAAU,KAAK;AAAA,QAAA;AAAA,OAC9B;AAEF,WAAK,WAAW;AAAA,QACd,GAAG,KAAK;AAAA,QACR,GAAGwE;AAAA,MACL;AAAA,IAAA,CACD;AAAA,EAAA;AAAA,EAGH,MAAc,MAAM7D,GAAiE;AACnF,UAAMoD,IAAqB;AAAA,MACzB,OAAO;AAAA,QACL,aAAapD,KAAY;AAAA,MAAA;AAAA,IAE7B,GAEM,EAAE,MAAAwB,GAAM,OAAAmC,EAAA,IACZ,MAAMC,EAAwC,MAAMR,CAAO;AAE7D,WAAIO,KACF,QAAQ,MAAMA,CAAK,GACZ,WAGLnC,MAAS,SACJA,IAGF;AAAA,EAAA;AAAA,EA0CD,aAAahB,GAA8DC,IAAuB,IAAO;AAC/G,UAAMC,IAA4C,CAAC;AACnD,QAAI,CAAC,KAAK,SAAS,CAAC,KAAK,MAAM,UAAUD,GAAa;AACpD,YAAMpB,IAAO;AAAA,QACX,GAAGmB;AAAA,MACL;AACA,MAAAE,EAAS,KAAKrB,CAAI;AAAA,IAAA;AAElB,eAASsB,IAAI,GAAGA,IAAI,KAAK,MAAM,QAAQA,KAAK;AAC1C,cAAMtB,IAAO;AAAA,UACX,GAAG,KAAK,MAAMsB,CAAC;AAAA,UACf,GAAGH;AAAA,QACL;AACA,QAAAE,EAAS,KAAKrB,CAAI;AAAA,MAAA;AAGtB,SAAK,QAAQqB,GACR,KAAA,cAAc,IAAIoD,IAA6B;AAAA,EAAA;AAAA,EAGtD,SAAS;AACA,WAAAvD;AAAA;AAAA;AAAA,UAGDhB,EAAA,MAAKiD,OAAL,KAAuB,IAAA,CAAA;AAAA,UACvBjD,EAAA,MAAKiD,OAAL,KAAsB,IAAA,CAAA;AAAA;AAAA;AAAA,EAAA;AA+EhC;AA9VOA,IAAA,oBAAA,QAAA;AA+MLC,IAAc,SAACR,GAA8D;;AACvE,EAAA,KAAK,YAAY,KAAK,gBACxB,QAAQ,MAAM,kBAAkB,KAAK,SAAS,KAAK,WAAW,GAC9D,KAAK,cAAc,KAAK;AAG1B,QAAM8B,MAAUnE,IAAAqC,EAAM,OAAO,UAAb,gBAAArC,EAAoB,YAAW,GACzCgB,MACJR,IAAA6B,EAAM,OAAO,UAAb,gBAAA7B,EAAoB,KAAK,CAACf,MAAS,CAAC,CAACA,EAAK,cAAa;AACrD,MAAAqB,IAAWqD,IAAU,SAAYnD;AAErC,QAAMoD,MAAoBC,KAAA/B,IAAA,KAAK,UAAL,gBAAAA,EAAa,OAAb,gBAAA+B,EAAiB,sBAAqB,KAAK;AAErE,MAAIF;AACF,SAAK,aAAa;AAAA,MAChB,mBAAAC;AAAA,OACC,EAAI;AAAA,OACF;AACL,UAAMjE,KAASW,KAAA,gBAAAA,EAAU,MAAM,YAAW,IAAK,KAAK,oBAAoBA,KAAA,gBAAAA,EAAU;AAClF,SAAK,aAAa;AAAA,MAChB,KAAKA,KAAA,gBAAAA,EAAU;AAAA,MACf,UAAUA,KAAA,gBAAAA,EAAU;AAAA,MACpB,gBAAgBA,KAAA,gBAAAA,EAAU;AAAA,MAC1B,YAAYA,KAAA,gBAAAA,EAAU;AAAA,MACtB,OAAAX;AAAA,MACA,mBAAAiE;AAAA,IAAA,CACmC;AAAA,EAAA;AAEzC;AAEAtB,KAAa,SAACT,GAAuB;AAC7B,QAAApC,IAAQoC,EAAM,OAAO;AAC3B,OAAK,qBAAqBpC,GAE1B,KAAK,aAAa;AAAA,IAChB,mBAAmB,KAAK;AAAA,EAAA,CACzB;AACH;AAgCA8C,KAAgB,WAAG;AACV,SAAApC;AAAA;AAAA,eAEI,KAAK,MAAM;AAAA,+BACK,KAAK,kBAAkB;AAAA,2BAC3B,KAAK,kBAAkB;AAAA,eACnC,KAAK,SAAS,CAAE,CAAA;AAAA,aAClB,KAAK,IAAI;AAAA,aACT,KAAK,IAAI;AAAA,0BACI,KAAK,iBAAiB;AAAA,mBAC7B,KAAK,UAAU;AAAA,mBACf,KAAK,UAAU;AAAA,kBAChB,KAAK,SAAS;AAAA,yBACP,KAAK,gBAAgB;AAAA,kBAC5B,KAAK,SAAS;AAAA,gBAChBhB,QAAKiD,GAAcC,CAAA,CAAA;AAAA,kBACjB,KAAK,QAAQ;AAAA;AAAA;AAAA;AAI7B;AAEAG,KAAe,WAAG;;AACV,QAAAsB,IAAU,CAAC,GAACtE,IAAA,KAAK,UAAL,QAAAA,EAAY,WAAU,CAAC,GAACQ,IAAA,KAAK,MAAM,CAAC,MAAZ,QAAAA,EAAe,WACnD+D,IAAQ;AAEd,SAAK,KAAK,SAAS,SAEZ5D;AAAA;AAAA,gBAEK4D,CAAK;AAAA,oBACD,CAACD,CAAO;AAAA,mBACT,KAAK,QAAQ;AAAA,kBACd3E,QAAKiD,GAAaE,EAAA,CAAA;AAAA,oBAChB,KAAK,QAAQ;AAAA;AAAA,QARKnC,sBAAyB4D,CAAK;AAWlE;AAzTWtB,EA4Tc,SAAS;AAAA,EAChCuB,GAAiB;AAAA,EACjBjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+BF;AA9SAC,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GA9ChBQ,EA+CX,WAAA,aAAA,CAAA;AAGAT,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAjDfQ,EAkDX,WAAA,oBAAA,CAAA;AASAT,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,SAAS,SAAS,GAAM,CAAA;AAAA,GA1D/BQ,EA2DX,WAAA,YAAA,CAAA;AAMQT,EAAA;AAAA,EADPE,EAAM;AAAA,GAhEIO,EAiEH,WAAA,cAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GAnEIO,EAoEH,WAAA,sBAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GAtEIO,EAuEH,WAAA,qBAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GAzEIO,EA0EH,WAAA,sBAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GA5EIO,EA6EH,WAAA,aAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GA/EIO,EAgFH,WAAA,QAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GAlFIO,EAmFH,WAAA,QAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GArFIO,EAsFH,WAAA,UAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GAxFIO,EAyFH,WAAA,cAAA,CAAA;AAIAT,EAAA;AAAA,EADPE,EAAM;AAAA,GA5FIO,EA6FH,WAAA,sBAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GA/FIO,EAgGH,WAAA,YAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GAlGIO,EAmGH,WAAA,eAAA,CAAA;AAGAT,EAAA;AAAA,EADPE,EAAM;AAAA,GArGIO,EAsGH,WAAA,WAAA,CAAA;AAEAT,EAAA;AAAA,EADPE,EAAM;AAAA,GAvGIO,EAwGH,WAAA,eAAA,CAAA;AAxGGA,IAANT,EAAA;AAAA,EADNG,EAAc/D,EAAW;AAAA,GACbqE,CAAA;"}