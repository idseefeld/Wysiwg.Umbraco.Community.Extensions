{"version":3,"file":"dashboard.element-S6yezZM9.js","sources":["../../../Wysiwg/src/util/updateStatusEnum.ts","../../../Wysiwg/src/dashboards/dashboard.element.ts"],"sourcesContent":["export enum UpdateStatus {\r\n  Unknown,\r\n  UpToDate,\r\n  Update,\r\n  Install\r\n};\r\n","import {\r\n  LitElement,\r\n  css,\r\n  html,\r\n  customElement,\r\n  state,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\nimport { UUIButtonElement } from \"@umbraco-cms/backoffice/external/uui\";\r\nimport {\r\n  UMB_NOTIFICATION_CONTEXT,\r\n  UmbNotificationContext,\r\n} from \"@umbraco-cms/backoffice/notification\";\r\nimport {\r\n  UMB_CURRENT_USER_CONTEXT,\r\n  UmbCurrentUserModel,\r\n} from \"@umbraco-cms/backoffice/current-user\";\r\nimport { FixUpgradeData, GetVariationsResponse, WysiwgUmbracoCommunityExtensionsService } from \"../api\";\r\nimport { UpdateStatus } from \"../util/updateStatusEnum\";\r\nimport { umbConfirmModal, UmbConfirmModalData } from \"@umbraco-cms/backoffice/modal\";\r\nimport { CommonUtilities } from \"../util/common.utilities\";\r\nimport { SemVersion } from \"../util/types\";\r\nimport { Debugging } from \"../constants\";\r\n\r\n@customElement(\"wysiwg-dashboard\")\r\nexport class WysiwgDashboardElement extends UmbElementMixin(LitElement) {\r\n\r\n  @state()\r\n  private _contextCurrentUser: UmbCurrentUserModel | undefined = undefined;\r\n\r\n  @state()\r\n  private _updateStatus: UpdateStatus | undefined = undefined;\r\n\r\n  @state()\r\n  private _variations: GetVariationsResponse | undefined = undefined;\r\n\r\n  @state()\r\n  private _uninstalling: boolean = false;\r\n\r\n  private _varyByCulture: boolean = false;\r\n  private _varyBySegment: boolean = false;\r\n\r\n  private _version: SemVersion = { major: 1, minor: 0, patch: 0 };\r\n\r\n  private _debug = Debugging;\r\n\r\n  private _commonUtilities: CommonUtilities | undefined = undefined;\r\n\r\n  #notificationContext: UmbNotificationContext | undefined = undefined;\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.consumeContext(UMB_NOTIFICATION_CONTEXT, (notificationContext) => {\r\n      this.#notificationContext = notificationContext;\r\n      this._commonUtilities = new CommonUtilities(this.localize, notificationContext);\r\n    });\r\n\r\n    this.consumeContext(UMB_CURRENT_USER_CONTEXT, (currentUserContext) => {\r\n      if (!currentUserContext) {\r\n        this._contextCurrentUser = undefined;\r\n        return;\r\n      }\r\n      // When we have the current user context\r\n      // We can observe properties from it, such as the current user or perhaps just individual properties\r\n      // When the currentUser object changes we will get notified and can reset the @state properrty\r\n      this.observe(currentUserContext.currentUser, (currentUser) => {\r\n        this._contextCurrentUser = currentUser;\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  #onChangeCulture = (ev: Event) => {\r\n    const checkboxElement = ev.target as HTMLInputElement;\r\n    this._varyByCulture = checkboxElement.checked;\r\n  }\r\n  #onChangeSegment = (ev: Event) => {\r\n    const checkboxElement = ev.target as HTMLInputElement;\r\n    this._varyBySegment = checkboxElement.checked;\r\n  }\r\n\r\n  #onClickUpdateSettings = async (ev: Event) => {\r\n    const buttonElement = ev.target as UUIButtonElement;\r\n    if (!buttonElement || buttonElement.state === \"waiting\") return;\r\n    buttonElement.state = \"waiting\";\r\n\r\n    if (this._version.major > 15 || (this._version.major >= 15 && this._version.minor >= 4 && this._version.patch >= 0)) {\r\n      this._varyBySegment = false;\r\n    }\r\n    const options: FixUpgradeData = {\r\n      query: {\r\n        culture: this._varyByCulture,\r\n        segment: this._varyBySegment,\r\n      }\r\n    };\r\n    const { data, error } = await WysiwgUmbracoCommunityExtensionsService.fixUpgrade(options);\r\n\r\n    if (error) {\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.stay(\"danger\", {\r\n          data: {\r\n            headline: this.localize.term(\"wysiwg_updateSettingsError\"),\r\n            message: `${this.localize.term(\"wysiwg_updateSettingsErrorDescription\")} ${error}`,\r\n          },\r\n        });\r\n      }\r\n      buttonElement.state = \"failed\";\r\n      console.error(error);\r\n      return \"error\";\r\n    }\r\n    if (data !== undefined) {\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.peek(\"positive\", {\r\n          data: {\r\n            headline: this.localize.term(\"wysiwg_updateSettingsSuccess\"),\r\n            message: `${this.localize.term(\"wysiwg_updateSettingsSuccessDescription\")}`,\r\n          },\r\n        });\r\n      }\r\n      this.setVariations(data);\r\n      buttonElement.state = \"success\";\r\n    }\r\n  }\r\n\r\n  #onClickInstall = async (ev: Event) => {\r\n    const buttonElement = ev.target as UUIButtonElement;\r\n    if (!buttonElement || buttonElement.state === \"waiting\") return;\r\n    buttonElement.state = \"waiting\";\r\n\r\n    const { data, error } = await WysiwgUmbracoCommunityExtensionsService.install();\r\n\r\n    if (error) {\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.stay(\"danger\", {\r\n          data: {\r\n            headline: this.localize.term(\"wysiwg_installError\"),\r\n            message: `${this.localize.term(\"wysiwg_installErrorDescription\")} ${error}`,\r\n          },\r\n        });\r\n      }\r\n      buttonElement.state = \"failed\";\r\n      console.error(error);\r\n      return \"error\";\r\n    }\r\n\r\n    if (data !== undefined) {\r\n      if (data === \"Installed\") {\r\n        if (this.#notificationContext) {\r\n          this.#notificationContext.peek(\"positive\", {\r\n            data: {\r\n              headline: this.localize.term(\"wysiwg_installSuccess\"),\r\n              message: this.localize.term(\"wysiwg_installSuccessDescription\"),\r\n            },\r\n          });\r\n        }\r\n        this._updateStatus = UpdateStatus.UpToDate;\r\n        buttonElement.state = \"success\";\r\n      } else {\r\n        buttonElement.state = \"failed\";\r\n      }\r\n    }\r\n  };\r\n\r\n  #onClickUninstall = async (ev: Event) => {\r\n    const buttonElement = ev.target as UUIButtonElement;\r\n    if (!buttonElement || buttonElement.state === \"waiting\") return;\r\n\r\n    const modalData: UmbConfirmModalData = {\r\n      color: 'danger',\r\n      headline: this.localize.term(\"wysiwg_unistallConfirmHeadline\", { debug: this._debug, }),\r\n      content: html`${this.localize.term(\"wysiwg_uninstallConfirmDescription\", { debug: this._debug, })}`,\r\n      confirmLabel: this.localize.term(\"wysiwg_okConfirmButtonLabel\", { debug: this._debug, }),\r\n      cancelLabel: this.localize.term(\"wysiwg_cancelConfirmButtonLabel\", { debug: this._debug, }),\r\n    };\r\n    await umbConfirmModal(this, modalData);\r\n    console.log(\"confirmed uninstall\");\r\n\r\n    buttonElement.state = \"waiting\";\r\n    this._uninstalling = true;\r\n\r\n    const { data, error } = await WysiwgUmbracoCommunityExtensionsService.unInstall();\r\n\r\n    this._uninstalling = false;\r\n\r\n    if (error) {\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.stay(\"danger\", {\r\n          data: {\r\n            headline: this.localize.term(\"wysiwg_uninstallError\"),\r\n            message: `${this.localize.term(\"wysiwg_uninstallErrorDescription\")} ${error}`,\r\n          },\r\n        });\r\n        buttonElement.state = \"failed\";\r\n      }\r\n      console.error(error);\r\n      return \"error\";\r\n    }\r\n\r\n    if (data !== undefined) {\r\n      if (data === \"Uninstalled\") {\r\n        if (this.#notificationContext) {\r\n          this.#notificationContext.peek(\"positive\", {\r\n            data: {\r\n              headline: this.localize.term(\"wysiwg_uninstallSuccessTitle\"),\r\n              message: this.localize.term(\"wysiwg_uninstallSuccessDescription\")\r\n            },\r\n          });\r\n        }\r\n        buttonElement.state = \"success\";\r\n      } else {\r\n        buttonElement.state = \"failed\";\r\n      }\r\n      this._updateStatus = undefined;\r\n    }\r\n  };\r\n\r\n  private async getVariations() {\r\n    const { data, error } = await WysiwgUmbracoCommunityExtensionsService.getVariations();\r\n\r\n    if (error) {\r\n      if (this.#notificationContext) {\r\n        this.#notificationContext.stay(\"danger\", {\r\n          data: {\r\n            headline: this.localize.term(\"wysiwg_variationsError\"),\r\n            message: `${this.localize.term(\"wysiwg_variationsErrorDescription\")} ${error}`,\r\n          },\r\n        });\r\n      }\r\n      return \"error\";\r\n    }\r\n\r\n    if (data !== undefined) {\r\n      this.setVariations(data);\r\n    }\r\n  }\r\n\r\n  private setVariations(data: GetVariationsResponse) {\r\n    this._variations = data;\r\n    this._varyByCulture = this._variations.indexOf(\"culture\") !== -1;\r\n    this._varyBySegment = this._variations.indexOf(\"segment\") !== -1;\r\n  }\r\n\r\n  render() {\r\n    if (!this._contextCurrentUser?.isAdmin) {\r\n      return html`<umb-localize key=\"wysiwg_\" .debug=${this._debug}>\r\n      <p>Only admins can see this dashboard</p>\r\n      </umb-localize>`;\r\n    }\r\n\r\n    this.setUpdateStatus();\r\n\r\n    this.setSemVersion();\r\n\r\n    this.getVariations()\r\n\r\n    return html`${this.renderSetupBox()} ${this.renderUpdateBox()}`;\r\n  }\r\n\r\n  private async setUpdateStatus() {\r\n    if (this._updateStatus) return;\r\n\r\n    await this._commonUtilities?.getUpdateStatus(this.#notificationContext).then((status) => {\r\n      if (status) {\r\n        this._updateStatus = status;\r\n      }\r\n    });\r\n  }\r\n\r\n  private async setSemVersion() {\r\n    await this._commonUtilities?.getUmbracoVersion(this.#notificationContext).then((version) => {\r\n      if (version) {\r\n        this._version = version;\r\n      }\r\n    });\r\n  }\r\n\r\n  private renderSetupBox() {\r\n    if (this._updateStatus === undefined) { return this.renderUninstallBox(); }\r\n\r\n    if (this._updateStatus === UpdateStatus.UpToDate) { return this.renderUninstallBox(); }\r\n\r\n    const buttonLabel = this._updateStatus === UpdateStatus.Install\r\n      ? this.localize.term(\"wysiwg_setupButtonLabel\", { debug: this._debug, })\r\n      : this.localize.term(\"wysiwg_updateButtonLabel\", { debug: this._debug, });\r\n\r\n    return html`\r\n      <uui-box headline=${this.localize.term(\"wysiwg_setupTitle\", {\r\n      debug: this._debug,\r\n    })}>\r\n        <uui-button\r\n          color=\"positive\"\r\n          look=\"primary\"\r\n          @click=\"${this.#onClickInstall}\"\r\n        >\r\n        ${buttonLabel}\r\n        </uui-button>\r\n        <div slot=\"header\"></div>\r\n        <umb-localize key=\"wysiwg_setupButtonDescription\" .debug=${this._debug}>\r\n          <p>\r\n            This will create the document and data types needed for WYSIWYG block\r\n            editor views.\r\n          </p>\r\n        </umb-localize>\r\n      </uui-box>\r\n    `;\r\n  }\r\n\r\n  private renderUpdateBox() {\r\n    if (this._uninstalling || this._updateStatus === undefined) { return; }\r\n\r\n    if (this._updateStatus !== UpdateStatus.UpToDate) { return; }\r\n\r\n    const buttonLabel = this.localize.term(\"wysiwg_cultureSegmentButtonLabel\", { debug: this._debug, });\r\n\r\n    return html`\r\n      <uui-box headline=${this.localize.term(\"wysiwg_cultureSegmentTitle\", {\r\n      debug: this._debug,\r\n    })}>\r\n        <div slot=\"header\"></div>\r\n        <umb-localize key=\"wysiwg_cultureSegmentDescription\" .debug=${this._debug}>\r\n          <p>\r\n            This will update the culture and segment settings for the WYSIWYG BlockGrid element types.\r\n          </p>\r\n        </umb-localize>\r\n        <p>\r\n          <uui-checkbox\r\n            @change=\"${this.#onChangeCulture}\"\r\n            ?checked=${this._varyByCulture}>Vary by culture</uui-checkbox><br />\r\n          ${this.renderSegmentCheckbox()}\r\n        </p>\r\n        <uui-button\r\n          color=\"positive\"\r\n          look=\"primary\"\r\n          @click=\"${this.#onClickUpdateSettings}\"\r\n        >\r\n        ${buttonLabel}\r\n        </uui-button>\r\n      </uui-box>\r\n    `;\r\n  }\r\n\r\n  private renderSegmentCheckbox() {\r\n    if (this._version.major > 15 || (this._version.major >= 15 && this._version.minor >= 4 && this._version.patch >= 0)) {\r\n      return html`\r\n      <uui-checkbox\r\n        disabled\r\n        ?checked=${this._varyBySegment}>Vary by segment</uui-checkbox>\r\n      `;\r\n    }\r\n\r\n    return html`\r\n    <uui-checkbox\r\n      @change=\"${this.#onChangeSegment}\"\r\n      ?checked=${this._varyBySegment}>Vary by segment</uui-checkbox>\r\n    `;\r\n  }\r\n\r\n  private renderUninstallBox() {\r\n    if (this._updateStatus === undefined) { return; }\r\n    if (this._updateStatus === UpdateStatus.Install) { return; }\r\n\r\n    const buttonLabel = this.localize.term(\"wysiwg_uninstallButtonLabel\", { debug: this._debug, });\r\n    return html`\r\n      <uui-box headline=${this.localize.term(\"wysiwg_uninstallTitle\", {\r\n      debug: this._debug,\r\n    })}>\r\n        <div slot=\"header\"></div>\r\n        <umb-localize key=\"wysiwg_uninstallButtonDescription\" .debug=${this._debug}>\r\n          <p>\r\n            This will remove the document and data types needed for WYSIWYG block\r\n            editor views.\r\n          </p>\r\n        </umb-localize>\r\n        <uui-button\r\n          color=\"danger\"\r\n          look=\"primary\"\r\n          @click=\"${this.#onClickUninstall}\"\r\n        >\r\n        ${buttonLabel}\r\n        </uui-button>\r\n      </uui-box>\r\n    `;\r\n  }\r\n\r\n  static styles = [\r\n    css`\r\n      :host {\r\n        display: grid;\r\n        gap: var(--uui-size-layout-1);\r\n        padding: var(--uui-size-layout-1);\r\n        grid-template-columns: 1fr 1fr 1fr;\r\n      }\r\n\r\n      uui-box {\r\n        margin-bottom: var(--uui-size-layout-1);\r\n      }\r\n\r\n      h2 {\r\n        margin-top: 0;\r\n      }\r\n\r\n      .wide {\r\n        grid-column: span 3;\r\n      }\r\n    `,\r\n  ];\r\n}\r\n\r\nexport default WysiwgDashboardElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"wysiwg-dashboard\": WysiwgDashboardElement;\r\n  }\r\n}\r\n"],"names":["UpdateStatus","UpdateStatus2","_notificationContext","_onChangeCulture","_onChangeSegment","_onClickUpdateSettings","_onClickInstall","_onClickUninstall","WysiwgDashboardElement","UmbElementMixin","LitElement","Debugging","__privateAdd","ev","checkboxElement","buttonElement","options","data","error","WysiwgUmbracoCommunityExtensionsService","__privateGet","modalData","html","umbConfirmModal","UMB_NOTIFICATION_CONTEXT","notificationContext","__privateSet","CommonUtilities","UMB_CURRENT_USER_CONTEXT","currentUserContext","currentUser","_a","status","version","buttonLabel","css","__decorateClass","state","customElement","WysiwgDashboardElement$1"],"mappings":";;;;;;;AAAY,IAAAA,sBAAAA,OACVA,EAAAC,EAAA,UAAA,CAAA,IAAA,WACAD,EAAAC,EAAA,WAAA,CAAA,IAAA,YACAD,EAAAC,EAAA,SAAA,CAAA,IAAA,UACAD,EAAAC,EAAA,UAAA,CAAA,IAAA,WAJUD,IAAAA,KAAA,CAAA,CAAA;;;;;;gUCAZE,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAyBO,IAAMC,IAAN,cAAqCC,EAAgBC,CAAU,EAAE;AAAA,EAyBtE,cAAc;AACN,UAAA,GAvBR,KAAQ,sBAAuD,QAG/D,KAAQ,gBAA0C,QAGlD,KAAQ,cAAiD,QAGzD,KAAQ,gBAAyB,IAEjC,KAAQ,iBAA0B,IAClC,KAAQ,iBAA0B,IAElC,KAAQ,WAAuB,EAAE,OAAO,GAAG,OAAO,GAAG,OAAO,EAAE,GAE9D,KAAQ,SAASC,GAEjB,KAAQ,mBAAgD,QAExDC,EAAA,MAAAV,CAAA,GAyBAU,EAAA,MAAAT,GAAmB,CAACU,MAAc;AAChC,YAAMC,IAAkBD,EAAG;AAC3B,WAAK,iBAAiBC,EAAgB;AAAA,IAAA,CACxC,GACAF,EAAA,MAAAR,GAAmB,CAACS,MAAc;AAChC,YAAMC,IAAkBD,EAAG;AAC3B,WAAK,iBAAiBC,EAAgB;AAAA,IAAA,CACxC,GAEAF,EAAA,MAAAP,GAAyB,OAAOQ,MAAc;AAC5C,YAAME,IAAgBF,EAAG;AACzB,UAAI,CAACE,KAAiBA,EAAc,UAAU,UAAW;AACzD,MAAAA,EAAc,QAAQ,YAElB,KAAK,SAAS,QAAQ,MAAO,KAAK,SAAS,SAAS,MAAM,KAAK,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,OAC/G,KAAK,iBAAiB;AAExB,YAAMC,IAA0B;AAAA,QAC9B,OAAO;AAAA,UACL,SAAS,KAAK;AAAA,UACd,SAAS,KAAK;AAAA,QAAA;AAAA,MAElB,GACM,EAAE,MAAAC,GAAM,OAAAC,EAAA,IAAU,MAAMC,EAAwC,WAAWH,CAAO;AAExF,UAAIE;AACF,eAAIE,QAAKlB,CAAsB,KACxBkB,EAAA,MAAAlB,CAAA,EAAqB,KAAK,UAAU;AAAA,UACvC,MAAM;AAAA,YACJ,UAAU,KAAK,SAAS,KAAK,4BAA4B;AAAA,YACzD,SAAS,GAAG,KAAK,SAAS,KAAK,uCAAuC,CAAC,IAAIgB,CAAK;AAAA,UAAA;AAAA,QAClF,CACD,GAEHH,EAAc,QAAQ,UACtB,QAAQ,MAAMG,CAAK,GACZ;AAET,MAAID,MAAS,WACPG,QAAKlB,CAAsB,KACxBkB,EAAA,MAAAlB,CAAA,EAAqB,KAAK,YAAY;AAAA,QACzC,MAAM;AAAA,UACJ,UAAU,KAAK,SAAS,KAAK,8BAA8B;AAAA,UAC3D,SAAS,GAAG,KAAK,SAAS,KAAK,yCAAyC,CAAC;AAAA,QAAA;AAAA,MAC3E,CACD,GAEH,KAAK,cAAce,CAAI,GACvBF,EAAc,QAAQ;AAAA,IACxB,CACF,GAEAH,EAAA,MAAAN,GAAkB,OAAOO,MAAc;AACrC,YAAME,IAAgBF,EAAG;AACzB,UAAI,CAACE,KAAiBA,EAAc,UAAU,UAAW;AACzD,MAAAA,EAAc,QAAQ;AAEtB,YAAM,EAAE,MAAAE,GAAM,OAAAC,EAAU,IAAA,MAAMC,EAAwC,QAAQ;AAE9E,UAAID;AACF,eAAIE,QAAKlB,CAAsB,KACxBkB,EAAA,MAAAlB,CAAA,EAAqB,KAAK,UAAU;AAAA,UACvC,MAAM;AAAA,YACJ,UAAU,KAAK,SAAS,KAAK,qBAAqB;AAAA,YAClD,SAAS,GAAG,KAAK,SAAS,KAAK,gCAAgC,CAAC,IAAIgB,CAAK;AAAA,UAAA;AAAA,QAC3E,CACD,GAEHH,EAAc,QAAQ,UACtB,QAAQ,MAAMG,CAAK,GACZ;AAGT,MAAID,MAAS,WACPA,MAAS,eACPG,QAAKlB,CAAsB,KACxBkB,EAAA,MAAAlB,CAAA,EAAqB,KAAK,YAAY;AAAA,QACzC,MAAM;AAAA,UACJ,UAAU,KAAK,SAAS,KAAK,uBAAuB;AAAA,UACpD,SAAS,KAAK,SAAS,KAAK,kCAAkC;AAAA,QAAA;AAAA,MAChE,CACD,GAEH,KAAK,gBAAgBF,EAAa,UAClCe,EAAc,QAAQ,aAEtBA,EAAc,QAAQ;AAAA,IAE1B,CACF,GAEAH,EAAA,MAAAL,GAAoB,OAAOM,MAAc;AACvC,YAAME,IAAgBF,EAAG;AACzB,UAAI,CAACE,KAAiBA,EAAc,UAAU,UAAW;AAEzD,YAAMM,IAAiC;AAAA,QACrC,OAAO;AAAA,QACP,UAAU,KAAK,SAAS,KAAK,kCAAkC,EAAE,OAAO,KAAK,QAAS;AAAA,QACtF,SAASC,IAAO,KAAK,SAAS,KAAK,sCAAsC,EAAE,OAAO,KAAK,OAAQ,CAAC,CAAC;AAAA,QACjG,cAAc,KAAK,SAAS,KAAK,+BAA+B,EAAE,OAAO,KAAK,QAAS;AAAA,QACvF,aAAa,KAAK,SAAS,KAAK,mCAAmC,EAAE,OAAO,KAAK,OAAS,CAAA;AAAA,MAC5F;AACM,YAAAC,EAAgB,MAAMF,CAAS,GACrC,QAAQ,IAAI,qBAAqB,GAEjCN,EAAc,QAAQ,WACtB,KAAK,gBAAgB;AAErB,YAAM,EAAE,MAAAE,GAAM,OAAAC,EAAU,IAAA,MAAMC,EAAwC,UAAU;AAIhF,UAFA,KAAK,gBAAgB,IAEjBD;AACF,eAAIE,QAAKlB,CAAsB,MACxBkB,EAAA,MAAAlB,CAAA,EAAqB,KAAK,UAAU;AAAA,UACvC,MAAM;AAAA,YACJ,UAAU,KAAK,SAAS,KAAK,uBAAuB;AAAA,YACpD,SAAS,GAAG,KAAK,SAAS,KAAK,kCAAkC,CAAC,IAAIgB,CAAK;AAAA,UAAA;AAAA,QAC7E,CACD,GACDH,EAAc,QAAQ,WAExB,QAAQ,MAAMG,CAAK,GACZ;AAGT,MAAID,MAAS,WACPA,MAAS,iBACPG,QAAKlB,CAAsB,KACxBkB,EAAA,MAAAlB,CAAA,EAAqB,KAAK,YAAY;AAAA,QACzC,MAAM;AAAA,UACJ,UAAU,KAAK,SAAS,KAAK,8BAA8B;AAAA,UAC3D,SAAS,KAAK,SAAS,KAAK,oCAAoC;AAAA,QAAA;AAAA,MAClE,CACD,GAEHa,EAAc,QAAQ,aAEtBA,EAAc,QAAQ,UAExB,KAAK,gBAAgB;AAAA,IACvB,CACF,GAlKO,KAAA,eAAeS,GAA0B,CAACC,MAAwB;AACrE,MAAAC,EAAA,MAAKxB,GAAuBuB,CAAA,GAC5B,KAAK,mBAAmB,IAAIE,EAAgB,KAAK,UAAUF,CAAmB;AAAA,IAAA,CAC/E,GAEI,KAAA,eAAeG,GAA0B,CAACC,MAAuB;AACpE,UAAI,CAACA,GAAoB;AACvB,aAAK,sBAAsB;AAC3B;AAAA,MAAA;AAKF,WAAK,QAAQA,EAAmB,aAAa,CAACC,MAAgB;AAC5D,aAAK,sBAAsBA;AAAA,MAAA,CAC5B;AAAA,IAAA,CACF;AAAA,EAAA;AAAA,EAoJH,MAAc,gBAAgB;AAC5B,UAAM,EAAE,MAAAb,GAAM,OAAAC,EAAU,IAAA,MAAMC,EAAwC,cAAc;AAEpF,QAAID;AACF,aAAIE,QAAKlB,CAAsB,KACxBkB,EAAA,MAAAlB,CAAA,EAAqB,KAAK,UAAU;AAAA,QACvC,MAAM;AAAA,UACJ,UAAU,KAAK,SAAS,KAAK,wBAAwB;AAAA,UACrD,SAAS,GAAG,KAAK,SAAS,KAAK,mCAAmC,CAAC,IAAIgB,CAAK;AAAA,QAAA;AAAA,MAC9E,CACD,GAEI;AAGT,IAAID,MAAS,UACX,KAAK,cAAcA,CAAI;AAAA,EACzB;AAAA,EAGM,cAAcA,GAA6B;AACjD,SAAK,cAAcA,GACnB,KAAK,iBAAiB,KAAK,YAAY,QAAQ,SAAS,MAAM,IAC9D,KAAK,iBAAiB,KAAK,YAAY,QAAQ,SAAS,MAAM;AAAA,EAAA;AAAA,EAGhE,SAAS;;AACH,YAACc,IAAA,KAAK,wBAAL,QAAAA,EAA0B,WAM/B,KAAK,gBAAgB,GAErB,KAAK,cAAc,GAEnB,KAAK,cAAc,GAEZT,IAAO,KAAK,eAAA,CAAgB,IAAI,KAAK,iBAAiB,MAXpDA,uCAA0C,KAAK,MAAM;AAAA;AAAA;AAAA,EAWD;AAAA,EAG/D,MAAc,kBAAkB;;AAC9B,IAAI,KAAK,iBAEH,QAAAS,IAAA,KAAK,qBAAL,gBAAAA,EAAuB,gBAAgBX,EAAA,MAAKlB,IAAsB,KAAK,CAAC8B,MAAW;AACvF,MAAIA,MACF,KAAK,gBAAgBA;AAAA,IACvB;AAAA,EACD;AAAA,EAGH,MAAc,gBAAgB;;AACtB,YAAAD,IAAA,KAAK,qBAAL,gBAAAA,EAAuB,kBAAkBX,EAAA,MAAKlB,IAAsB,KAAK,CAAC+B,MAAY;AAC1F,MAAIA,MACF,KAAK,WAAWA;AAAA,IAClB;AAAA,EACD;AAAA,EAGK,iBAAiB;AACnB,QAAA,KAAK,kBAAkB;AAAa,aAAO,KAAK,mBAAmB;AAEnE,QAAA,KAAK,kBAAkBjC,EAAa;AAAY,aAAO,KAAK,mBAAmB;AAE7E,UAAAkC,IAAc,KAAK,kBAAkBlC,EAAa,UACpD,KAAK,SAAS,KAAK,2BAA2B,EAAE,OAAO,KAAK,OAAS,CAAA,IACrE,KAAK,SAAS,KAAK,4BAA4B,EAAE,OAAO,KAAK,QAAS;AAEnE,WAAAsB;AAAA,0BACe,KAAK,SAAS,KAAK,qBAAqB;AAAA,MAC5D,OAAO,KAAK;AAAA,IAAA,CACb,CAAC;AAAA;AAAA;AAAA;AAAA,oBAIcF,QAAKd,CAAe,CAAA;AAAA;AAAA,UAE9B4B,CAAW;AAAA;AAAA;AAAA,mEAG8C,KAAK,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA;AAAA,EAUpE,kBAAkB;AAGpB,QAFA,KAAK,iBAAiB,KAAK,kBAAkB,UAE7C,KAAK,kBAAkBlC,EAAa;AAAY;AAE9C,UAAAkC,IAAc,KAAK,SAAS,KAAK,oCAAoC,EAAE,OAAO,KAAK,QAAS;AAE3F,WAAAZ;AAAA,0BACe,KAAK,SAAS,KAAK,8BAA8B;AAAA,MACrE,OAAO,KAAK;AAAA,IAAA,CACb,CAAC;AAAA;AAAA,sEAEgE,KAAK,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAO1DF,QAAKjB,CAAgB,CAAA;AAAA,uBACrB,KAAK,cAAc;AAAA,YAC9B,KAAK,sBAAuB,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKpBiB,QAAKf,CAAsB,CAAA;AAAA;AAAA,UAErC6B,CAAW;AAAA;AAAA;AAAA;AAAA,EAAA;AAAA,EAMX,wBAAwB;AAC9B,WAAI,KAAK,SAAS,QAAQ,MAAO,KAAK,SAAS,SAAS,MAAM,KAAK,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,IACxGZ;AAAA;AAAA;AAAA,mBAGM,KAAK,cAAc;AAAA,UAI3BA;AAAA;AAAA,iBAEMF,QAAKhB,CAAgB,CAAA;AAAA,iBACrB,KAAK,cAAc;AAAA;AAAA,EAAA;AAAA,EAI1B,qBAAqB;AAEvB,QADA,KAAK,kBAAkB,UACvB,KAAK,kBAAkBJ,EAAa;AAAW;AAE7C,UAAAkC,IAAc,KAAK,SAAS,KAAK,+BAA+B,EAAE,OAAO,KAAK,QAAS;AACtF,WAAAZ;AAAA,0BACe,KAAK,SAAS,KAAK,yBAAyB;AAAA,MAChE,OAAO,KAAK;AAAA,IAAA,CACb,CAAC;AAAA;AAAA,uEAEiE,KAAK,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAS9DF,QAAKb,CAAiB,CAAA;AAAA;AAAA,UAEhC2B,CAAW;AAAA;AAAA;AAAA;AAAA,EAAA;AA4BrB;AAvWEhC,IAAA,oBAAA,QAAA;AAyBAC,IAAA,oBAAA,QAAA;AAIAC,IAAA,oBAAA,QAAA;AAKAC,IAAA,oBAAA,QAAA;AA2CAC,IAAA,oBAAA,QAAA;AAuCAC,IAAA,oBAAA,QAAA;AA3IWC,EAwWJ,SAAS;AAAA,EACd2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBF;AA1XQC,EAAA;AAAA,EADPC,EAAM;AAAA,GAFI7B,EAGH,WAAA,uBAAA,CAAA;AAGA4B,EAAA;AAAA,EADPC,EAAM;AAAA,GALI7B,EAMH,WAAA,iBAAA,CAAA;AAGA4B,EAAA;AAAA,EADPC,EAAM;AAAA,GARI7B,EASH,WAAA,eAAA,CAAA;AAGA4B,EAAA;AAAA,EADPC,EAAM;AAAA,GAXI7B,EAYH,WAAA,iBAAA,CAAA;AAZGA,IAAN4B,EAAA;AAAA,EADNE,EAAc,kBAAkB;AAAA,GACpB9B,CAAA;AAgYb,MAAA+B,IAAe/B;;;;;;;"}