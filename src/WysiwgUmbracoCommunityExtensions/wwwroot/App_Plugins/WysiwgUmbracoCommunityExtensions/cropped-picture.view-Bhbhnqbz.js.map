{"version":3,"file":"cropped-picture.view-Bhbhnqbz.js","sources":["../../../Wysiwg/src/blocks/views/cropped-picture.view.ts"],"sourcesContent":["import {\r\n  html,\r\n  customElement,\r\n  property,\r\n  css,\r\n  unsafeHTML,\r\n} from \"@umbraco-cms/backoffice/external/lit\";\r\nimport type { UmbBlockDataType } from \"@umbraco-cms/backoffice/block\";\r\nimport { ColorType, CroppedPictureCustomViewProps } from \"./types\";\r\nimport WysiwgBaseBlockEditorCustomViewElement from \"./wysiwg-base-block-editor-custom.view\";\r\n\r\n@customElement(\"wysiwg-croppedicture-view\")\r\nexport class CroppedPictureCustomView\r\n  extends WysiwgBaseBlockEditorCustomViewElement {\r\n\r\n  private debugLocalize: boolean = false;\r\n  defaultColor: ColorType = { label: \"Black\", value: \"#000\" };\r\n\r\n  @property({ attribute: false })\r\n  content?: UmbBlockDataType;\r\n\r\n  render() {\r\n    const pictureWithCrop = this.content as CroppedPictureCustomViewProps;\r\n    if (!pictureWithCrop) {\r\n      return html`\r\n      <div class=\"error\">\r\n        <umb-localize key=\"wysiwg_invalidData\" .debug=${this.debugLocalize}\r\n          >invalid data</umb-localize\r\n        >\r\n      </div>`;\r\n    }\r\n    const mediaCropItems = pictureWithCrop?.mediaItem ?? [];\r\n    const mediaCropItem = mediaCropItems[0] ?? null;\r\n    const mediaKey = mediaCropItem ? mediaCropItem.mediaKey : \"\";\r\n    if (!mediaKey) {\r\n      return html`<div class=\"error\">\r\n        <umb-localize key=\"wysiwg_noImageSelected\" .debug=${this.debugLocalize}\r\n          >No image selected or found</umb-localize\r\n        >\r\n      </div>`;\r\n    } else {\r\n      const alt = pictureWithCrop?.alternativeText ?? mediaCropItem?.selectedCropAlias ?? \"\";\r\n      const img = html`<wysiwg-cropped-image class=\"wysiwg-cropped-image\" .mediaItem=${mediaCropItem} .alt=${alt}></wysiwg-cropped-image>`;\r\n\r\n      const caption = pictureWithCrop?.figCaption;\r\n      const captionColor =\r\n        pictureWithCrop?.captionColor?.value ?? this.defaultColor.value;\r\n      const rotate = pictureWithCrop?.rotation?.from ?? 0;\r\n      const rotationStyle = !rotate ? '' : `transform: rotate(${rotate}deg);`;\r\n      const figcaptionClass = !rotate ? '' : 'class=\"rotate\" ';\r\n      const figcaptionAttr = this.isTransparentColor(captionColor) ? '' : `${figcaptionClass}style=\"color: var(--wysiwg-figcaption-color,${captionColor});\"`;\r\n      const figCaption = caption\r\n        ? unsafeHTML(`<figcaption ${figcaptionAttr}>${caption}</figcaption>`)\r\n        : \"\";\r\n\r\n\r\n      return html`<figure style=${rotationStyle}>${img}${figCaption}</figure>`;\r\n    }\r\n  }\r\n\r\n  static styles = [\r\n    css`\r\n      :host {\r\n        display: block;\r\n        height: auto;\r\n        box-sizing: border-box;\r\n        margin: 0;\r\n        padding: 0;\r\n        font-family: var(--wysiwg-font-family, initial);\r\n      }\r\n      .error {\r\n        color: var(--wysiwg-error-color, #cc0000);\r\n        font-weight: bold;\r\n        text-align: center;\r\n      }\r\n      figure {\r\n        margin: 0;\r\n        padding: 0;\r\n        display: block;\r\n\r\n        font-size: var(--wysiwg-font-size-16, 16px);\r\n        line-height: var(--wysiwg-line-height-24, 24px);\r\n      }\r\n      figcaption {\r\n        display: inline-block;\r\n        margin: var(--wysiwg-figcaption-margin, 0);\r\n        padding: var(--wysiwg-figcaption-padding, 0);\r\n        color: var(--wysiwg-figcaption-color, inherit);\r\n        font-style: var(--wysiwg-figcaption-font-style, italic);\r\n        font-variant: var(--wysiwg-figcaption-font-variant, normal);\r\n        font-weight: var(--wysiwg-figcaption-font-weight, normal);\r\n        font-size: var(--wysiwg-figcaption-font-size, 90%);\r\n        font-family: var(--wysiwg-figcaption-font-family, inherit);\r\n        line-height: var(--wysiwg-figcaption-line-height, 1.2em);\r\n        text-shadow: var(--wysiwg-figcaption-text-shadow, none);\r\n      }\r\n      figcaption.rotate{\r\n        font-style: var(--wysiwg-figcaption-rotate-font-style, normal);\r\n      }\r\n      .wysiwg-cropped-image {\r\n        border-radius: var(--wysiwg-cropped-image-border-radius, 0);\r\n        border-style: var(--wysiwg-cropped-image-border-style, none);\r\n        border-width: var(--wysiwg-cropped-image-border-width, 0);\r\n        border-color: var(--wysiwg-cropped-image-border-color, transparent);\r\n        box-shadow: var(--wysiwg-cropped-image-box-shadow, none);\r\n        background-color: var(--wysiwg-cropped-image-background-color, transparent);\r\n      }\r\n    `,\r\n  ];\r\n}\r\n\r\nexport default CroppedPictureCustomView;\r\n"],"names":["CroppedPictureCustomView","WysiwgBaseBlockEditorCustomViewElement","pictureWithCrop","html","mediaCropItem","alt","img","caption","captionColor","_a","rotate","_b","rotationStyle","figcaptionClass","figcaptionAttr","figCaption","unsafeHTML","css","__decorateClass","property","customElement","CroppedPictureCustomView$1"],"mappings":";;;;;;;AAYa,IAAAA,IAAN,cACGC,EAAuC;AAAA,EAD1C,cAAA;AAAA,UAAA,GAAA,SAAA,GAGL,KAAQ,gBAAyB,IACjC,KAAA,eAA0B,EAAE,OAAO,SAAS,OAAO,OAAO;AAAA,EAAA;AAAA,EAK1D,SAAS;;AACP,UAAMC,IAAkB,KAAK;AAC7B,QAAI,CAACA;AACI,aAAAC;AAAA;AAAA,wDAE2C,KAAK,aAAa;AAAA;AAAA;AAAA;AAMhE,UAAAC,MADiBF,KAAA,gBAAAA,EAAiB,cAAa,CAAC,GACjB,CAAC,KAAK;AAE3C,QADiBE,IAAgBA,EAAc,WAAW,IAOnD;AACL,YAAMC,KAAMH,KAAA,gBAAAA,EAAiB,qBAAmBE,KAAA,gBAAAA,EAAe,sBAAqB,IAC9EE,IAAMH,kEAAqEC,CAAa,SAASC,CAAG,4BAEpGE,IAAUL,KAAA,gBAAAA,EAAiB,YAC3BM,MACJC,IAAAP,KAAA,gBAAAA,EAAiB,iBAAjB,gBAAAO,EAA+B,UAAS,KAAK,aAAa,OACtDC,MAASC,IAAAT,KAAA,gBAAAA,EAAiB,aAAjB,gBAAAS,EAA2B,SAAQ,GAC5CC,IAAiBF,IAAc,qBAAqBA,CAAM,UAAhC,IAC1BG,IAAmBH,IAAc,oBAAL,IAC5BI,IAAiB,KAAK,mBAAmBN,CAAY,IAAI,KAAK,GAAGK,CAAe,+CAA+CL,CAAY,OAC3IO,IAAaR,IACfS,EAAW,eAAeF,CAAc,IAAIP,CAAO,eAAe,IAClE;AAGJ,aAAOJ,kBAAqBS,CAAa,IAAIN,CAAG,GAAGS,CAAU;AAAA,IAAA;AArBtD,aAAAZ;AAAA,4DAC+C,KAAK,aAAa;AAAA;AAAA;AAAA;AAAA,EAqB1E;AAoDJ;AAjGaH,EAgDJ,SAAS;AAAA,EACdiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+CF;AAzFAC,EAAA;AAAA,EADCC,EAAS,EAAE,WAAW,GAAO,CAAA;AAAA,GANnBnB,EAOX,WAAA,WAAA,CAAA;AAPWA,IAANkB,EAAA;AAAA,EADNE,EAAc,2BAA2B;AAAA,GAC7BpB,CAAA;AAmGb,MAAAqB,IAAerB;"}